---
layout: single
title:  "Project 01: Exploratory Data Analysis"
permalink: /Writing/p3
date:   2019-07-23
tags: project
author_profile: true
---
**Zillow Housing Prices Exploratory Data Analysis**




**Load Data**


```python
import pandas as pd
import numpy as np
import seaborn as sns
```


```python
state_data = pd.read_csv("zecon/State_time_series.csv",parse_dates=True)
print(len(state_data.columns))
print(len(state_data))
```

    82
    13212



```python
state_data = state_data[['Date','RegionName','ZHVI_1bedroom','ZHVI_2bedroom','ZHVI_3bedroom','ZHVI_4bedroom','ZHVI_BottomTier','ZHVI_CondoCoop','ZHVI_MiddleTier','ZHVI_SingleFamilyResidence','ZHVI_TopTier']]
```


```python
state_data["Date"] = pd.to_datetime(state_data["Date"])
state_data['Year'] = state_data['Date'].dt.year
state_data['Month'] = state_data['Date'].dt.month
```


```python
cross_data = pd.read_csv("zecon/cities_crosswalk.csv")
#cross_data.head()
```


```python
cities_data = pd.read_csv("zecon/City_time_series.csv")
cities_data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>InventorySeasonallyAdjusted_AllHomes</th>
      <th>InventoryRaw_AllHomes</th>
      <th>MedianListingPricePerSqft_1Bedroom</th>
      <th>MedianListingPricePerSqft_2Bedroom</th>
      <th>MedianListingPricePerSqft_3Bedroom</th>
      <th>MedianListingPricePerSqft_4Bedroom</th>
      <th>MedianListingPricePerSqft_5BedroomOrMore</th>
      <th>MedianListingPricePerSqft_AllHomes</th>
      <th>...</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_CondoCoop</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>ZRI_AllHomes</th>
      <th>ZRI_AllHomesPlusMultifamily</th>
      <th>ZriPerSqft_AllHomes</th>
      <th>Zri_MultiFamilyResidenceRental</th>
      <th>Zri_SingleFamilyResidenceRental</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1996-04-30</td>
      <td>abbottstownadamspa</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>108700.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1996-04-30</td>
      <td>aberdeenbinghamid</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>168400.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1996-04-30</td>
      <td>aberdeenharfordmd</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>81300.0</td>
      <td>137900.0</td>
      <td>109600.0</td>
      <td>108600.0</td>
      <td>147900.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1996-04-30</td>
      <td>aberdeenmonroems</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>74500.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1996-04-30</td>
      <td>aberdeenmoorenc</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>131100.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 81 columns</p>
</div>




```python
print(len(cities_data.columns))
print(len(cities_data))
```

    81
    3762566



```python
cities_data["Date"] = pd.to_datetime(cities_data["Date"])
cities_data['Year'] = cities_data['Date'].dt.year
cities_data['Month'] = cities_data['Date'].dt.month
```


```python
city_state_data = cities_data.join(cross_data.set_index('Unique_City_ID'), on='RegionName')
```


```python

```

**Michigan**


```python
data_michigan = state_data.loc[state_data['RegionName'] == 'Michigan']
```


```python
year_plot = sns.barplot(x="Year", y="ZHVI_MiddleTier", data=data_michigan)
year_plot.set_xticklabels(year_plot.get_xticklabels(), rotation=90)
```




    [Text(0, 0, '1996'),
     Text(0, 0, '1997'),
     Text(0, 0, '1998'),
     Text(0, 0, '1999'),
     Text(0, 0, '2000'),
     Text(0, 0, '2001'),
     Text(0, 0, '2002'),
     Text(0, 0, '2003'),
     Text(0, 0, '2004'),
     Text(0, 0, '2005'),
     Text(0, 0, '2006'),
     Text(0, 0, '2007'),
     Text(0, 0, '2008'),
     Text(0, 0, '2009'),
     Text(0, 0, '2010'),
     Text(0, 0, '2011'),
     Text(0, 0, '2012'),
     Text(0, 0, '2013'),
     Text(0, 0, '2014'),
     Text(0, 0, '2015'),
     Text(0, 0, '2016'),
     Text(0, 0, '2017')]




![png](output_13_1.png)
<img src="/assets/images/zillow/output_13_1.png" width="100%">

This graph shows the median housing price within michigan over the course of the dataset. It accurately shows the 2008 recession and therefore is fairly reasonable to believe.

**Examining the Country in 2017**


```python
country_df = state_data[["RegionName","ZHVI_MiddleTier","Year"]]
country_df = country_df.loc[country_df["Year"]==2017]
country_df = country_df.dropna()
```


```python
#country_df
state_plot = sns.barplot(x="RegionName", y="ZHVI_MiddleTier", data=country_df)
state_plot.set_xticklabels(state_plot.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'Alabama'),
     Text(0, 0, 'Alaska'),
     Text(0, 0, 'Arizona'),
     Text(0, 0, 'Arkansas'),
     Text(0, 0, 'California'),
     Text(0, 0, 'Colorado'),
     Text(0, 0, 'Connecticut'),
     Text(0, 0, 'Delaware'),
     Text(0, 0, 'DistrictofColumbia'),
     Text(0, 0, 'Florida'),
     Text(0, 0, 'Georgia'),
     Text(0, 0, 'Hawaii'),
     Text(0, 0, 'Idaho'),
     Text(0, 0, 'Illinois'),
     Text(0, 0, 'Indiana'),
     Text(0, 0, 'Iowa'),
     Text(0, 0, 'Kansas'),
     Text(0, 0, 'Kentucky'),
     Text(0, 0, 'Maine'),
     Text(0, 0, 'Maryland'),
     Text(0, 0, 'Massachusetts'),
     Text(0, 0, 'Michigan'),
     Text(0, 0, 'Minnesota'),
     Text(0, 0, 'Mississippi'),
     Text(0, 0, 'Missouri'),
     Text(0, 0, 'Montana'),
     Text(0, 0, 'Nebraska'),
     Text(0, 0, 'Nevada'),
     Text(0, 0, 'NewHampshire'),
     Text(0, 0, 'NewJersey'),
     Text(0, 0, 'NewMexico'),
     Text(0, 0, 'NewYork'),
     Text(0, 0, 'NorthCarolina'),
     Text(0, 0, 'NorthDakota'),
     Text(0, 0, 'Ohio'),
     Text(0, 0, 'Oklahoma'),
     Text(0, 0, 'Oregon'),
     Text(0, 0, 'Pennsylvania'),
     Text(0, 0, 'RhodeIsland'),
     Text(0, 0, 'SouthCarolina'),
     Text(0, 0, 'SouthDakota'),
     Text(0, 0, 'Tennessee'),
     Text(0, 0, 'Texas'),
     Text(0, 0, 'Utah'),
     Text(0, 0, 'Vermont'),
     Text(0, 0, 'Virginia'),
     Text(0, 0, 'Washington'),
     Text(0, 0, 'WestVirginia'),
     Text(0, 0, 'Wisconsin'),
     Text(0, 0, 'Wyoming')]




![png](output_17_1.png)
<img src="/assets/images/zillow/output_17_1.png" width="100%">


This graph makes intuitive sense as the states as the top are Hawaii and California along with Washington D.C. The cheapes states are West Virginia, Mississippi, and Oklahoma.


```python

```

**QUESTION ONE:
I’d like to find out where is the most expensive city to live in 2017 and where
is the least expensive.**

Take the values for the state data set prices and determine which are the max and
min prices overall. I can then visualize these through creating a scatter plot in plot.ly or
with d3 that maps the max and min for each state’s prices to show the spread and
differences for each of the states


```python
max_min_cities = city_state_data
q1_a = max_min_cities[["Date","RegionName","ZHVIPerSqft_AllHomes","ZHVI_BottomTier","ZHVI_MiddleTier","ZHVI_SingleFamilyResidence","ZHVI_TopTier","Month","Year","City","County","State"]]
q1_a = q1_a.dropna()
```


```python
#specific data for question
q1_a = q1_a.loc[q1_a['Year'] == 2017]
q1_a = q1_a.loc[q1_a['Month']== 5]
q1_a.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>Month</th>
      <th>Year</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3630515</th>
      <td>2017-05-31</td>
      <td>abbottstownadamspa</td>
      <td>121.0</td>
      <td>133100.0</td>
      <td>143800.0</td>
      <td>143800.0</td>
      <td>166700.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3630518</th>
      <td>2017-05-31</td>
      <td>aberdeengrays_harborwa</td>
      <td>82.0</td>
      <td>79100.0</td>
      <td>123700.0</td>
      <td>123800.0</td>
      <td>199200.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3630519</th>
      <td>2017-05-31</td>
      <td>aberdeenharfordmd</td>
      <td>142.0</td>
      <td>144300.0</td>
      <td>204100.0</td>
      <td>202500.0</td>
      <td>298300.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
    <tr>
      <th>3630523</th>
      <td>2017-05-31</td>
      <td>abilenedickinsonks</td>
      <td>72.0</td>
      <td>65000.0</td>
      <td>96700.0</td>
      <td>96700.0</td>
      <td>146100.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abilene</td>
      <td>Dickinson</td>
      <td>KS</td>
    </tr>
    <tr>
      <th>3630525</th>
      <td>2017-05-31</td>
      <td>abingdonharfordmd</td>
      <td>151.0</td>
      <td>184400.0</td>
      <td>238600.0</td>
      <td>241200.0</td>
      <td>317000.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abingdon</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
  </tbody>
</table>
</div>




```python
q1_a['graph'] = q1_a["City"] + " " + q1_a["State"]
```


```python
q1_a.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>Month</th>
      <th>Year</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
      <th>graph</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3630515</th>
      <td>2017-05-31</td>
      <td>abbottstownadamspa</td>
      <td>121.0</td>
      <td>133100.0</td>
      <td>143800.0</td>
      <td>143800.0</td>
      <td>166700.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
      <td>Abbottstown PA</td>
    </tr>
    <tr>
      <th>3630518</th>
      <td>2017-05-31</td>
      <td>aberdeengrays_harborwa</td>
      <td>82.0</td>
      <td>79100.0</td>
      <td>123700.0</td>
      <td>123800.0</td>
      <td>199200.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
      <td>Aberdeen WA</td>
    </tr>
    <tr>
      <th>3630519</th>
      <td>2017-05-31</td>
      <td>aberdeenharfordmd</td>
      <td>142.0</td>
      <td>144300.0</td>
      <td>204100.0</td>
      <td>202500.0</td>
      <td>298300.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
      <td>Aberdeen MD</td>
    </tr>
    <tr>
      <th>3630523</th>
      <td>2017-05-31</td>
      <td>abilenedickinsonks</td>
      <td>72.0</td>
      <td>65000.0</td>
      <td>96700.0</td>
      <td>96700.0</td>
      <td>146100.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abilene</td>
      <td>Dickinson</td>
      <td>KS</td>
      <td>Abilene KS</td>
    </tr>
    <tr>
      <th>3630525</th>
      <td>2017-05-31</td>
      <td>abingdonharfordmd</td>
      <td>151.0</td>
      <td>184400.0</td>
      <td>238600.0</td>
      <td>241200.0</td>
      <td>317000.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abingdon</td>
      <td>Harford</td>
      <td>MD</td>
      <td>Abingdon MD</td>
    </tr>
  </tbody>
</table>
</div>




```python
#q1_a_vis = q1_a.sort_values("ton",ascending=False).head(5)
q1_a_vis = q1_a[["ZHVI_MiddleTier","City","County","State","graph"]]
```


```python
q1_a_vis.sort_values("ZHVI_MiddleTier",ascending=False)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ZHVI_MiddleTier</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
      <th>graph</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3631033</th>
      <td>6399100.0</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>Atherton CA</td>
    </tr>
    <tr>
      <th>3638742</th>
      <td>4421300.0</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Los Altos Hills CA</td>
    </tr>
    <tr>
      <th>3636938</th>
      <td>4243800.0</td>
      <td>Hillsborough</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>Hillsborough CA</td>
    </tr>
    <tr>
      <th>3646055</th>
      <td>4099600.0</td>
      <td>Water Mill</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>Water Mill NY</td>
    </tr>
    <tr>
      <th>3642104</th>
      <td>3797800.0</td>
      <td>Portola Valley</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>Portola Valley CA</td>
    </tr>
    <tr>
      <th>3631519</th>
      <td>3562400.0</td>
      <td>Belvedere</td>
      <td>Marin</td>
      <td>CA</td>
      <td>Belvedere CA</td>
    </tr>
    <tr>
      <th>3646916</th>
      <td>3395200.0</td>
      <td>Woodside</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>Woodside CA</td>
    </tr>
    <tr>
      <th>3636873</th>
      <td>3183000.0</td>
      <td>Hidden Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>Hidden Hills CA</td>
    </tr>
    <tr>
      <th>3631662</th>
      <td>3042500.0</td>
      <td>Beverly Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>Beverly Hills CA</td>
    </tr>
    <tr>
      <th>3644200</th>
      <td>3020100.0</td>
      <td>Stanford</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Stanford CA</td>
    </tr>
    <tr>
      <th>3639005</th>
      <td>2892100.0</td>
      <td>Malibu</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>Malibu CA</td>
    </tr>
    <tr>
      <th>3638743</th>
      <td>2891400.0</td>
      <td>Los Altos</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Los Altos CA</td>
    </tr>
    <tr>
      <th>3639885</th>
      <td>2881600.0</td>
      <td>Monte Sereno</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Monte Sereno CA</td>
    </tr>
    <tr>
      <th>3641384</th>
      <td>2645700.0</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Palo Alto CA</td>
    </tr>
    <tr>
      <th>3642330</th>
      <td>2594900.0</td>
      <td>Rancho Santa Fe</td>
      <td>San Diego</td>
      <td>CA</td>
      <td>Rancho Santa Fe CA</td>
    </tr>
    <tr>
      <th>3647004</th>
      <td>2558600.0</td>
      <td>Yarrow Point</td>
      <td>King</td>
      <td>WA</td>
      <td>Yarrow Point WA</td>
    </tr>
    <tr>
      <th>3639434</th>
      <td>2541700.0</td>
      <td>Medina</td>
      <td>King</td>
      <td>WA</td>
      <td>Medina WA</td>
    </tr>
    <tr>
      <th>3643292</th>
      <td>2518200.0</td>
      <td>Saratoga</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>Saratoga CA</td>
    </tr>
    <tr>
      <th>3644754</th>
      <td>2507100.0</td>
      <td>Tiburon</td>
      <td>Marin</td>
      <td>CA</td>
      <td>Tiburon CA</td>
    </tr>
    <tr>
      <th>3633293</th>
      <td>2428000.0</td>
      <td>Clyde Hill</td>
      <td>King</td>
      <td>WA</td>
      <td>Clyde Hill WA</td>
    </tr>
    <tr>
      <th>3643225</th>
      <td>2285300.0</td>
      <td>Sands Point</td>
      <td>Nassau</td>
      <td>NY</td>
      <td>Sands Point NY</td>
    </tr>
    <tr>
      <th>3643202</th>
      <td>2244100.0</td>
      <td>San Marino</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>San Marino CA</td>
    </tr>
    <tr>
      <th>3639048</th>
      <td>2242500.0</td>
      <td>Manhattan Beach</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>Manhattan Beach CA</td>
    </tr>
    <tr>
      <th>3641066</th>
      <td>2225600.0</td>
      <td>Old Westbury</td>
      <td>Nassau</td>
      <td>NY</td>
      <td>Old Westbury NY</td>
    </tr>
    <tr>
      <th>3641733</th>
      <td>2145900.0</td>
      <td>Piedmont</td>
      <td>Alameda</td>
      <td>CA</td>
      <td>Piedmont CA</td>
    </tr>
    <tr>
      <th>3634079</th>
      <td>2107900.0</td>
      <td>Del Mar</td>
      <td>San Diego</td>
      <td>CA</td>
      <td>Del Mar CA</td>
    </tr>
    <tr>
      <th>3632968</th>
      <td>2055600.0</td>
      <td>Cherry Hills Village</td>
      <td>Arapahoe</td>
      <td>CO</td>
      <td>Cherry Hills Village CO</td>
    </tr>
    <tr>
      <th>3637730</th>
      <td>2053800.0</td>
      <td>Kentfield</td>
      <td>Marin</td>
      <td>CA</td>
      <td>Kentfield CA</td>
    </tr>
    <tr>
      <th>3641886</th>
      <td>2020800.0</td>
      <td>Plandome</td>
      <td>Nassau</td>
      <td>NY</td>
      <td>Plandome NY</td>
    </tr>
    <tr>
      <th>3641391</th>
      <td>2011400.0</td>
      <td>Palos Verdes Estates</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>Palos Verdes Estates CA</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3639045</th>
      <td>48700.0</td>
      <td>Mangum</td>
      <td>Greer</td>
      <td>OK</td>
      <td>Mangum OK</td>
    </tr>
    <tr>
      <th>3639365</th>
      <td>48600.0</td>
      <td>McDonald Chapel</td>
      <td>Jefferson</td>
      <td>AL</td>
      <td>McDonald Chapel AL</td>
    </tr>
    <tr>
      <th>3634409</th>
      <td>48300.0</td>
      <td>Duquesne</td>
      <td>Allegheny</td>
      <td>PA</td>
      <td>Duquesne PA</td>
    </tr>
    <tr>
      <th>3639349</th>
      <td>47800.0</td>
      <td>McAdoo</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>McAdoo PA</td>
    </tr>
    <tr>
      <th>3635506</th>
      <td>47700.0</td>
      <td>Frackville</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Frackville PA</td>
    </tr>
    <tr>
      <th>3638956</th>
      <td>47400.0</td>
      <td>Madison</td>
      <td>Madison</td>
      <td>IL</td>
      <td>Madison IL</td>
    </tr>
    <tr>
      <th>3638559</th>
      <td>47400.0</td>
      <td>Lipscomb</td>
      <td>Jefferson</td>
      <td>AL</td>
      <td>Lipscomb AL</td>
    </tr>
    <tr>
      <th>3635101</th>
      <td>47100.0</td>
      <td>Fairmont City</td>
      <td>Saint Clair</td>
      <td>IL</td>
      <td>Fairmont City IL</td>
    </tr>
    <tr>
      <th>3640833</th>
      <td>46800.0</td>
      <td>Northridge</td>
      <td>Montgomery</td>
      <td>OH</td>
      <td>Northridge OH</td>
    </tr>
    <tr>
      <th>3634676</th>
      <td>46400.0</td>
      <td>Edgewater</td>
      <td>Jefferson</td>
      <td>AL</td>
      <td>Edgewater AL</td>
    </tr>
    <tr>
      <th>3645715</th>
      <td>46400.0</td>
      <td>Venice</td>
      <td>Madison</td>
      <td>IL</td>
      <td>Venice IL</td>
    </tr>
    <tr>
      <th>3642349</th>
      <td>45700.0</td>
      <td>Rankin</td>
      <td>Allegheny</td>
      <td>PA</td>
      <td>Rankin PA</td>
    </tr>
    <tr>
      <th>3640478</th>
      <td>45600.0</td>
      <td>New Philadelphia</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>New Philadelphia PA</td>
    </tr>
    <tr>
      <th>3645984</th>
      <td>45500.0</td>
      <td>Warren</td>
      <td>Trumbull</td>
      <td>OH</td>
      <td>Warren OH</td>
    </tr>
    <tr>
      <th>3635049</th>
      <td>44400.0</td>
      <td>Experiment</td>
      <td>Spalding</td>
      <td>GA</td>
      <td>Experiment GA</td>
    </tr>
    <tr>
      <th>3632854</th>
      <td>44300.0</td>
      <td>Centreville</td>
      <td>Saint Clair</td>
      <td>IL</td>
      <td>Centreville IL</td>
    </tr>
    <tr>
      <th>3635433</th>
      <td>44000.0</td>
      <td>Fort McKinley</td>
      <td>Montgomery</td>
      <td>OH</td>
      <td>Fort McKinley OH</td>
    </tr>
    <tr>
      <th>3639752</th>
      <td>43300.0</td>
      <td>Minersville</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Minersville PA</td>
    </tr>
    <tr>
      <th>3634580</th>
      <td>42800.0</td>
      <td>East Saint Louis</td>
      <td>Saint Clair</td>
      <td>IL</td>
      <td>East Saint Louis IL</td>
    </tr>
    <tr>
      <th>3632527</th>
      <td>42300.0</td>
      <td>Campbell</td>
      <td>Mahoning</td>
      <td>OH</td>
      <td>Campbell OH</td>
    </tr>
    <tr>
      <th>3644592</th>
      <td>41900.0</td>
      <td>Tamaqua</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Tamaqua PA</td>
    </tr>
    <tr>
      <th>3634178</th>
      <td>41400.0</td>
      <td>Detroit</td>
      <td>Wayne</td>
      <td>MI</td>
      <td>Detroit MI</td>
    </tr>
    <tr>
      <th>3643602</th>
      <td>39800.0</td>
      <td>Shenandoah Heights</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Shenandoah Heights PA</td>
    </tr>
    <tr>
      <th>3633307</th>
      <td>38300.0</td>
      <td>Coaldale</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Coaldale PA</td>
    </tr>
    <tr>
      <th>3643039</th>
      <td>37600.0</td>
      <td>Saint Clair</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Saint Clair PA</td>
    </tr>
    <tr>
      <th>3637573</th>
      <td>37600.0</td>
      <td>Johnstown</td>
      <td>Cambria</td>
      <td>PA</td>
      <td>Johnstown PA</td>
    </tr>
    <tr>
      <th>3635895</th>
      <td>32900.0</td>
      <td>Girardville</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Girardville PA</td>
    </tr>
    <tr>
      <th>3630999</th>
      <td>31600.0</td>
      <td>Ashland</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Ashland PA</td>
    </tr>
    <tr>
      <th>3643607</th>
      <td>31100.0</td>
      <td>Shenandoah</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Shenandoah PA</td>
    </tr>
    <tr>
      <th>3638981</th>
      <td>30100.0</td>
      <td>Mahanoy City</td>
      <td>Schuylkill</td>
      <td>PA</td>
      <td>Mahanoy City PA</td>
    </tr>
  </tbody>
</table>
<p>9886 rows × 5 columns</p>
</div>




```python
q1_a_vis = q1_a_vis.head(20)
```


```python
q1_a_plot = sns.barplot(x="graph", y="ZHVI_MiddleTier", data=q1_a_vis)
q1_a_plot.set_xticklabels(q1_a_plot.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'Abbottstown PA'),
     Text(0, 0, 'Aberdeen WA'),
     Text(0, 0, 'Aberdeen MD'),
     Text(0, 0, 'Abilene KS'),
     Text(0, 0, 'Abingdon MD'),
     Text(0, 0, 'Abingdon VA'),
     Text(0, 0, 'Abington PA'),
     Text(0, 0, 'Abington MA'),
     Text(0, 0, 'Absecon NJ'),
     Text(0, 0, 'Accident MD'),
     Text(0, 0, 'Accokeek MD'),
     Text(0, 0, 'Acres Green CO'),
     Text(0, 0, 'Acton CA'),
     Text(0, 0, 'Acton MA'),
     Text(0, 0, 'Acton ME'),
     Text(0, 0, 'Acushnet MA'),
     Text(0, 0, 'Acworth GA'),
     Text(0, 0, 'Acworth NH'),
     Text(0, 0, 'Ada OH'),
     Text(0, 0, 'Adair OK')]




![png](output_29_1.png)
<img src="/assets/images/zillow/output_29_1.png" width="100%">



```python
q1_b_vis = q1_a.sort_values("ZHVI_MiddleTier",ascending=False).tail(20)
q1_b_vis[["ZHVI_MiddleTier","City","County","State"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ZHVI_MiddleTier</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3645715</th>
      <td>46400.0</td>
      <td>Venice</td>
      <td>Madison</td>
      <td>IL</td>
    </tr>
    <tr>
      <th>3642349</th>
      <td>45700.0</td>
      <td>Rankin</td>
      <td>Allegheny</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3640478</th>
      <td>45600.0</td>
      <td>New Philadelphia</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3645984</th>
      <td>45500.0</td>
      <td>Warren</td>
      <td>Trumbull</td>
      <td>OH</td>
    </tr>
    <tr>
      <th>3635049</th>
      <td>44400.0</td>
      <td>Experiment</td>
      <td>Spalding</td>
      <td>GA</td>
    </tr>
    <tr>
      <th>3632854</th>
      <td>44300.0</td>
      <td>Centreville</td>
      <td>Saint Clair</td>
      <td>IL</td>
    </tr>
    <tr>
      <th>3635433</th>
      <td>44000.0</td>
      <td>Fort McKinley</td>
      <td>Montgomery</td>
      <td>OH</td>
    </tr>
    <tr>
      <th>3639752</th>
      <td>43300.0</td>
      <td>Minersville</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3634580</th>
      <td>42800.0</td>
      <td>East Saint Louis</td>
      <td>Saint Clair</td>
      <td>IL</td>
    </tr>
    <tr>
      <th>3632527</th>
      <td>42300.0</td>
      <td>Campbell</td>
      <td>Mahoning</td>
      <td>OH</td>
    </tr>
    <tr>
      <th>3644592</th>
      <td>41900.0</td>
      <td>Tamaqua</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3634178</th>
      <td>41400.0</td>
      <td>Detroit</td>
      <td>Wayne</td>
      <td>MI</td>
    </tr>
    <tr>
      <th>3643602</th>
      <td>39800.0</td>
      <td>Shenandoah Heights</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3633307</th>
      <td>38300.0</td>
      <td>Coaldale</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3643039</th>
      <td>37600.0</td>
      <td>Saint Clair</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3637573</th>
      <td>37600.0</td>
      <td>Johnstown</td>
      <td>Cambria</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3635895</th>
      <td>32900.0</td>
      <td>Girardville</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3630999</th>
      <td>31600.0</td>
      <td>Ashland</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3643607</th>
      <td>31100.0</td>
      <td>Shenandoah</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3638981</th>
      <td>30100.0</td>
      <td>Mahanoy City</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
  </tbody>
</table>
</div>




```python
q1_b_plot = sns.barplot(x="graph", y="ZHVI_MiddleTier", data=q1_b_vis)
q1_b_plot.set_xticklabels(q1_b_plot.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'Venice IL'),
     Text(0, 0, 'Rankin PA'),
     Text(0, 0, 'New Philadelphia PA'),
     Text(0, 0, 'Warren OH'),
     Text(0, 0, 'Experiment GA'),
     Text(0, 0, 'Centreville IL'),
     Text(0, 0, 'Fort McKinley OH'),
     Text(0, 0, 'Minersville PA'),
     Text(0, 0, 'East Saint Louis IL'),
     Text(0, 0, 'Campbell OH'),
     Text(0, 0, 'Tamaqua PA'),
     Text(0, 0, 'Detroit MI'),
     Text(0, 0, 'Shenandoah Heights PA'),
     Text(0, 0, 'Coaldale PA'),
     Text(0, 0, 'Saint Clair PA'),
     Text(0, 0, 'Johnstown PA'),
     Text(0, 0, 'Girardville PA'),
     Text(0, 0, 'Ashland PA'),
     Text(0, 0, 'Shenandoah PA'),
     Text(0, 0, 'Mahanoy City PA')]




![png](output_31_1.png)
<img src="/assets/images/zillow/output_31_1.png" width="100%">


**QUESTION 2: Explore each states’ cities and figure out where the most expensive and least
expensive places to live are for 2017 in each state.**

Take the values for the city data set and determine which city has the highest price
per square foot in each state. Then create scatterplot with matplotlib to measure
each states’ individual cities and show which are the most expensive and least
expensive parts of the state.


```python
q2_a = city_state_data.loc[city_state_data['Year'] == 2017]
q2_a = q2_a.loc[q2_a['Month'] == 5]
q2_a = q2_a[["Date","ZHVIPerSqft_AllHomes","Month","Year","City","County","State"]]
q2_a = q2_a.dropna()
```


```python
q2_a.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Month</th>
      <th>Year</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3630513</th>
      <td>2017-05-31</td>
      <td>92.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abbeville</td>
      <td>Lafayette</td>
      <td>MS</td>
    </tr>
    <tr>
      <th>3630515</th>
      <td>2017-05-31</td>
      <td>121.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3630516</th>
      <td>2017-05-31</td>
      <td>90.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>3630518</th>
      <td>2017-05-31</td>
      <td>82.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3630519</th>
      <td>2017-05-31</td>
      <td>142.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
  </tbody>
</table>
</div>




```python
q2_max = q2_a.groupby(q2_a["State"],sort=False)["ZHVIPerSqft_AllHomes"].transform(max) == q2_a["ZHVIPerSqft_AllHomes"]
q2_a[q2_max]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Month</th>
      <th>Year</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3630933</th>
      <td>2017-05-31</td>
      <td>463.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Arlington</td>
      <td>Arlington</td>
      <td>VA</td>
    </tr>
    <tr>
      <th>3631011</th>
      <td>2017-05-31</td>
      <td>1132.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Aspen</td>
      <td>Pitkin</td>
      <td>CO</td>
    </tr>
    <tr>
      <th>3631033</th>
      <td>2017-05-31</td>
      <td>1746.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
    </tr>
    <tr>
      <th>3631451</th>
      <td>2017-05-31</td>
      <td>363.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Belle Meade</td>
      <td>Davidson</td>
      <td>TN</td>
    </tr>
    <tr>
      <th>3631463</th>
      <td>2017-05-31</td>
      <td>172.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Bellefonte</td>
      <td>New Castle</td>
      <td>DE</td>
    </tr>
    <tr>
      <th>3631707</th>
      <td>2017-05-31</td>
      <td>251.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Birmingham</td>
      <td>Oakland</td>
      <td>MI</td>
    </tr>
    <tr>
      <th>3632352</th>
      <td>2017-05-31</td>
      <td>200.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Burlington</td>
      <td>Chittenden</td>
      <td>VT</td>
    </tr>
    <tr>
      <th>3632520</th>
      <td>2017-05-31</td>
      <td>147.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Cammack Village</td>
      <td>Pulaski</td>
      <td>AR</td>
    </tr>
    <tr>
      <th>3632944</th>
      <td>2017-05-31</td>
      <td>137.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Cheat Lake</td>
      <td>Monongalia</td>
      <td>WV</td>
    </tr>
    <tr>
      <th>3633019</th>
      <td>2017-05-31</td>
      <td>647.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Chevy Chase Village</td>
      <td>Montgomery</td>
      <td>MD</td>
    </tr>
    <tr>
      <th>3633408</th>
      <td>2017-05-31</td>
      <td>192.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Colonial Pine Hills</td>
      <td>Pennington</td>
      <td>SD</td>
    </tr>
    <tr>
      <th>3634333</th>
      <td>2017-05-31</td>
      <td>279.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Druid Hills</td>
      <td>Dekalb</td>
      <td>GA</td>
    </tr>
    <tr>
      <th>3635022</th>
      <td>2017-05-31</td>
      <td>166.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Evansville</td>
      <td>Natrona</td>
      <td>WY</td>
    </tr>
    <tr>
      <th>3635274</th>
      <td>2017-05-31</td>
      <td>1098.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Fisher Island</td>
      <td>Miami-Dade</td>
      <td>FL</td>
    </tr>
    <tr>
      <th>3635520</th>
      <td>2017-05-31</td>
      <td>264.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Frankfort</td>
      <td>Franklin</td>
      <td>KY</td>
    </tr>
    <tr>
      <th>3635710</th>
      <td>2017-05-31</td>
      <td>210.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Gallatin Gateway</td>
      <td>Gallatin</td>
      <td>MT</td>
    </tr>
    <tr>
      <th>3635938</th>
      <td>2017-05-31</td>
      <td>426.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Glenbrook</td>
      <td>Douglas</td>
      <td>NV</td>
    </tr>
    <tr>
      <th>3636293</th>
      <td>2017-05-31</td>
      <td>579.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Greenwich</td>
      <td>Fairfield</td>
      <td>CT</td>
    </tr>
    <tr>
      <th>3636423</th>
      <td>2017-05-31</td>
      <td>704.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Haleiwa</td>
      <td>Honolulu</td>
      <td>HI</td>
    </tr>
    <tr>
      <th>3637616</th>
      <td>2017-05-31</td>
      <td>210.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Juneau</td>
      <td>Juneau</td>
      <td>AK</td>
    </tr>
    <tr>
      <th>3637706</th>
      <td>2017-05-31</td>
      <td>417.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Kenilworth</td>
      <td>Cook</td>
      <td>IL</td>
    </tr>
    <tr>
      <th>3637754</th>
      <td>2017-05-31</td>
      <td>388.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Ketchum</td>
      <td>Blaine</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>3637984</th>
      <td>2017-05-31</td>
      <td>265.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Ladue</td>
      <td>Saint Louis</td>
      <td>MO</td>
    </tr>
    <tr>
      <th>3638509</th>
      <td>2017-05-31</td>
      <td>215.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Lincoln</td>
      <td>Burleigh</td>
      <td>ND</td>
    </tr>
    <tr>
      <th>3638957</th>
      <td>2017-05-31</td>
      <td>110.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Madison</td>
      <td>Madison</td>
      <td>MS</td>
    </tr>
    <tr>
      <th>3639099</th>
      <td>2017-05-31</td>
      <td>207.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Maple Bluff</td>
      <td>Dane</td>
      <td>WI</td>
    </tr>
    <tr>
      <th>3639434</th>
      <td>2017-05-31</td>
      <td>764.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Medina</td>
      <td>King</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3639508</th>
      <td>2017-05-31</td>
      <td>175.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Meridian Hills</td>
      <td>Marion</td>
      <td>IN</td>
    </tr>
    <tr>
      <th>3639784</th>
      <td>2017-05-31</td>
      <td>244.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Mission Hills</td>
      <td>Johnson</td>
      <td>KS</td>
    </tr>
    <tr>
      <th>3640113</th>
      <td>2017-05-31</td>
      <td>295.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Mount Olympus</td>
      <td>Salt Lake</td>
      <td>UT</td>
    </tr>
    <tr>
      <th>3640405</th>
      <td>2017-05-31</td>
      <td>426.0</td>
      <td>5</td>
      <td>2017</td>
      <td>New Castle</td>
      <td>Rockingham</td>
      <td>NH</td>
    </tr>
    <tr>
      <th>3640473</th>
      <td>2017-05-31</td>
      <td>156.0</td>
      <td>5</td>
      <td>2017</td>
      <td>New Orleans</td>
      <td>Orleans</td>
      <td>LA</td>
    </tr>
    <tr>
      <th>3640498</th>
      <td>2017-05-31</td>
      <td>590.0</td>
      <td>5</td>
      <td>2017</td>
      <td>New Shoreham</td>
      <td>Washington</td>
      <td>RI</td>
    </tr>
    <tr>
      <th>3640604</th>
      <td>2017-05-31</td>
      <td>171.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Nichols Hills</td>
      <td>Oklahoma</td>
      <td>OK</td>
    </tr>
    <tr>
      <th>3641023</th>
      <td>2017-05-31</td>
      <td>330.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Ogunquit</td>
      <td>York</td>
      <td>ME</td>
    </tr>
    <tr>
      <th>3641134</th>
      <td>2017-05-31</td>
      <td>265.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Orange Beach</td>
      <td>Baldwin</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>3641419</th>
      <td>2017-05-31</td>
      <td>377.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Paradise Valley</td>
      <td>Maricopa</td>
      <td>AZ</td>
    </tr>
    <tr>
      <th>3642101</th>
      <td>2017-05-31</td>
      <td>330.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Portland</td>
      <td>Multnomah</td>
      <td>OR</td>
    </tr>
    <tr>
      <th>3642301</th>
      <td>2017-05-31</td>
      <td>256.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Radnor</td>
      <td>Delaware</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3642803</th>
      <td>2017-05-31</td>
      <td>414.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Rollingwood</td>
      <td>Travis</td>
      <td>TX</td>
    </tr>
    <tr>
      <th>3643266</th>
      <td>2017-05-31</td>
      <td>195.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Santa Fe</td>
      <td>Santa Fe</td>
      <td>NM</td>
    </tr>
    <tr>
      <th>3644306</th>
      <td>2017-05-31</td>
      <td>763.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Stone Harbor</td>
      <td>Cape May</td>
      <td>NJ</td>
    </tr>
    <tr>
      <th>3644416</th>
      <td>2017-05-31</td>
      <td>606.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Sullivans Island</td>
      <td>Charleston</td>
      <td>SC</td>
    </tr>
    <tr>
      <th>3644695</th>
      <td>2017-05-31</td>
      <td>262.0</td>
      <td>5</td>
      <td>2017</td>
      <td>The Village of Indian Hill</td>
      <td>Hamilton</td>
      <td>OH</td>
    </tr>
    <tr>
      <th>3644830</th>
      <td>2017-05-31</td>
      <td>353.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Tonka Bay</td>
      <td>Hennepin</td>
      <td>MN</td>
    </tr>
    <tr>
      <th>3645147</th>
      <td>2017-05-31</td>
      <td>781.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Town of Nantucket</td>
      <td>Nantucket</td>
      <td>MA</td>
    </tr>
    <tr>
      <th>3645562</th>
      <td>2017-05-31</td>
      <td>187.0</td>
      <td>5</td>
      <td>2017</td>
      <td>University Heights</td>
      <td>Johnson</td>
      <td>IA</td>
    </tr>
    <tr>
      <th>3646033</th>
      <td>2017-05-31</td>
      <td>493.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Washington</td>
      <td>District of Columbia</td>
      <td>DC</td>
    </tr>
    <tr>
      <th>3646055</th>
      <td>2017-05-31</td>
      <td>1185.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Water Mill</td>
      <td>Suffolk</td>
      <td>NY</td>
    </tr>
    <tr>
      <th>3646070</th>
      <td>2017-05-31</td>
      <td>158.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Waterloo</td>
      <td>Douglas</td>
      <td>NE</td>
    </tr>
    <tr>
      <th>3646964</th>
      <td>2017-05-31</td>
      <td>555.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Wrightsville Beach</td>
      <td>New Hanover</td>
      <td>NC</td>
    </tr>
  </tbody>
</table>
</div>




```python
max_graph = sns.barplot(x="State", y="ZHVIPerSqft_AllHomes", data=q2_a[q2_max])
max_graph.set_xticklabels(max_graph.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'VA'),
     Text(0, 0, 'CO'),
     Text(0, 0, 'CA'),
     Text(0, 0, 'TN'),
     Text(0, 0, 'DE'),
     Text(0, 0, 'MI'),
     Text(0, 0, 'VT'),
     Text(0, 0, 'AR'),
     Text(0, 0, 'WV'),
     Text(0, 0, 'MD'),
     Text(0, 0, 'SD'),
     Text(0, 0, 'GA'),
     Text(0, 0, 'WY'),
     Text(0, 0, 'FL'),
     Text(0, 0, 'KY'),
     Text(0, 0, 'MT'),
     Text(0, 0, 'NV'),
     Text(0, 0, 'CT'),
     Text(0, 0, 'HI'),
     Text(0, 0, 'AK'),
     Text(0, 0, 'IL'),
     Text(0, 0, 'ID'),
     Text(0, 0, 'MO'),
     Text(0, 0, 'ND'),
     Text(0, 0, 'MS'),
     Text(0, 0, 'WI'),
     Text(0, 0, 'WA'),
     Text(0, 0, 'IN'),
     Text(0, 0, 'KS'),
     Text(0, 0, 'UT'),
     Text(0, 0, 'NH'),
     Text(0, 0, 'LA'),
     Text(0, 0, 'RI'),
     Text(0, 0, 'OK'),
     Text(0, 0, 'ME'),
     Text(0, 0, 'AL'),
     Text(0, 0, 'AZ'),
     Text(0, 0, 'OR'),
     Text(0, 0, 'PA'),
     Text(0, 0, 'TX'),
     Text(0, 0, 'NM'),
     Text(0, 0, 'NJ'),
     Text(0, 0, 'SC'),
     Text(0, 0, 'OH'),
     Text(0, 0, 'MN'),
     Text(0, 0, 'MA'),
     Text(0, 0, 'IA'),
     Text(0, 0, 'DC'),
     Text(0, 0, 'NY'),
     Text(0, 0, 'NE'),
     Text(0, 0, 'NC')]




![png](output_37_1.png)
<img src="/assets/images/zillow/output_37_1.png" width="100%">




```python
q2_min = q2_a.groupby(q2_a["State"],sort=False)["ZHVIPerSqft_AllHomes"].transform(min) == q2_a["ZHVIPerSqft_AllHomes"]
q2_a[q2_min]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Month</th>
      <th>Year</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3631340</th>
      <td>2017-05-31</td>
      <td>44.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Bayard</td>
      <td>Grant</td>
      <td>NM</td>
    </tr>
    <tr>
      <th>3631591</th>
      <td>2017-05-31</td>
      <td>43.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Berlin</td>
      <td>Coos</td>
      <td>NH</td>
    </tr>
    <tr>
      <th>3632027</th>
      <td>2017-05-31</td>
      <td>33.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Breckenridge</td>
      <td>Stephens</td>
      <td>TX</td>
    </tr>
    <tr>
      <th>3632101</th>
      <td>2017-05-31</td>
      <td>41.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Brighton</td>
      <td>Jefferson</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>3632436</th>
      <td>2017-05-31</td>
      <td>41.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Cahokia</td>
      <td>Saint Clair</td>
      <td>IL</td>
    </tr>
    <tr>
      <th>3632779</th>
      <td>2017-05-31</td>
      <td>87.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Cedar City</td>
      <td>Iron</td>
      <td>UT</td>
    </tr>
    <tr>
      <th>3632890</th>
      <td>2017-05-31</td>
      <td>36.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Chanute</td>
      <td>Neosho</td>
      <td>KS</td>
    </tr>
    <tr>
      <th>3632938</th>
      <td>2017-05-31</td>
      <td>48.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Chattahoochee</td>
      <td>Gadsden</td>
      <td>FL</td>
    </tr>
    <tr>
      <th>3633738</th>
      <td>2017-05-31</td>
      <td>57.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Creighton</td>
      <td>Knox</td>
      <td>NE</td>
    </tr>
    <tr>
      <th>3633946</th>
      <td>2017-05-31</td>
      <td>56.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Danville</td>
      <td>Danville City</td>
      <td>VA</td>
    </tr>
    <tr>
      <th>3634102</th>
      <td>2017-05-31</td>
      <td>121.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Dell Rapids</td>
      <td>Minnehaha</td>
      <td>SD</td>
    </tr>
    <tr>
      <th>3634275</th>
      <td>2017-05-31</td>
      <td>57.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Douglas</td>
      <td>Cochise</td>
      <td>AZ</td>
    </tr>
    <tr>
      <th>3634697</th>
      <td>2017-05-31</td>
      <td>33.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Edison</td>
      <td>Calhoun</td>
      <td>GA</td>
    </tr>
    <tr>
      <th>3635064</th>
      <td>2017-05-31</td>
      <td>123.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Fairbanks</td>
      <td>Fairbanks North Star</td>
      <td>AK</td>
    </tr>
    <tr>
      <th>3635104</th>
      <td>2017-05-31</td>
      <td>39.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Fairmont</td>
      <td>Robeson</td>
      <td>NC</td>
    </tr>
    <tr>
      <th>3635682</th>
      <td>2017-05-31</td>
      <td>56.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Gaffney</td>
      <td>Cherokee</td>
      <td>SC</td>
    </tr>
    <tr>
      <th>3636099</th>
      <td>2017-05-31</td>
      <td>109.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Grand Forks</td>
      <td>Grand Forks</td>
      <td>ND</td>
    </tr>
    <tr>
      <th>3636251</th>
      <td>2017-05-31</td>
      <td>38.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Greenfield</td>
      <td>Weakley</td>
      <td>TN</td>
    </tr>
    <tr>
      <th>3636302</th>
      <td>2017-05-31</td>
      <td>43.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Greenwood</td>
      <td>Leflore</td>
      <td>MS</td>
    </tr>
    <tr>
      <th>3636319</th>
      <td>2017-05-31</td>
      <td>85.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Greybull</td>
      <td>Big Horn</td>
      <td>WY</td>
    </tr>
    <tr>
      <th>3636585</th>
      <td>2017-05-31</td>
      <td>101.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Harrington</td>
      <td>Kent</td>
      <td>DE</td>
    </tr>
    <tr>
      <th>3636616</th>
      <td>2017-05-31</td>
      <td>39.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Hartford City</td>
      <td>Blackford</td>
      <td>IN</td>
    </tr>
    <tr>
      <th>3636618</th>
      <td>2017-05-31</td>
      <td>78.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Hartford</td>
      <td>Hartford</td>
      <td>CT</td>
    </tr>
    <tr>
      <th>3637116</th>
      <td>2017-05-31</td>
      <td>70.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Hoquiam</td>
      <td>Grays Harbor</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3637281</th>
      <td>2017-05-31</td>
      <td>78.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Idaho Falls</td>
      <td>Bonneville</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>3637539</th>
      <td>2017-05-31</td>
      <td>47.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Jennings</td>
      <td>Saint Louis</td>
      <td>MO</td>
    </tr>
    <tr>
      <th>3638201</th>
      <td>2017-05-31</td>
      <td>41.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Lanett</td>
      <td>Chambers</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>3638251</th>
      <td>2017-05-31</td>
      <td>103.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Laughlin</td>
      <td>Clark</td>
      <td>NV</td>
    </tr>
    <tr>
      <th>3638457</th>
      <td>2017-05-31</td>
      <td>84.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Libby</td>
      <td>Lincoln</td>
      <td>MT</td>
    </tr>
    <tr>
      <th>3638672</th>
      <td>2017-05-31</td>
      <td>34.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Lonaconing</td>
      <td>Allegany</td>
      <td>MD</td>
    </tr>
    <tr>
      <th>3638981</th>
      <td>2017-05-31</td>
      <td>23.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Mahanoy City</td>
      <td>Schuylkill</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3639221</th>
      <td>2017-05-31</td>
      <td>48.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Marshalltown</td>
      <td>Marshall</td>
      <td>IA</td>
    </tr>
    <tr>
      <th>3639806</th>
      <td>2017-05-31</td>
      <td>81.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Mojave</td>
      <td>Kern</td>
      <td>CA</td>
    </tr>
    <tr>
      <th>3639900</th>
      <td>2017-05-31</td>
      <td>43.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Montevideo</td>
      <td>Chippewa</td>
      <td>MN</td>
    </tr>
    <tr>
      <th>3640275</th>
      <td>2017-05-31</td>
      <td>45.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Naoma</td>
      <td>Raleigh</td>
      <td>WV</td>
    </tr>
    <tr>
      <th>3640339</th>
      <td>2017-05-31</td>
      <td>58.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Nekoosa</td>
      <td>Wood</td>
      <td>WI</td>
    </tr>
    <tr>
      <th>3640658</th>
      <td>2017-05-31</td>
      <td>86.0</td>
      <td>5</td>
      <td>2017</td>
      <td>North Adams</td>
      <td>Berkshire</td>
      <td>MA</td>
    </tr>
    <tr>
      <th>3640769</th>
      <td>2017-05-31</td>
      <td>121.0</td>
      <td>5</td>
      <td>2017</td>
      <td>North Providence</td>
      <td>Providence</td>
      <td>RI</td>
    </tr>
    <tr>
      <th>3640855</th>
      <td>2017-05-31</td>
      <td>56.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Norway</td>
      <td>Orangeburg</td>
      <td>SC</td>
    </tr>
    <tr>
      <th>3640884</th>
      <td>2017-05-31</td>
      <td>76.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Nyssa</td>
      <td>Malheur</td>
      <td>OR</td>
    </tr>
    <tr>
      <th>3641323</th>
      <td>2017-05-31</td>
      <td>161.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Pahoa</td>
      <td>Hawaii</td>
      <td>HI</td>
    </tr>
    <tr>
      <th>3641765</th>
      <td>2017-05-31</td>
      <td>48.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Pine Bluff</td>
      <td>Jefferson</td>
      <td>AR</td>
    </tr>
    <tr>
      <th>3642182</th>
      <td>2017-05-31</td>
      <td>41.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Prichard</td>
      <td>Mobile</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>3642633</th>
      <td>2017-05-31</td>
      <td>35.0</td>
      <td>5</td>
      <td>2017</td>
      <td>River Rouge</td>
      <td>Wayne</td>
      <td>MI</td>
    </tr>
    <tr>
      <th>3642657</th>
      <td>2017-05-31</td>
      <td>47.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Riverview</td>
      <td>Saint Louis</td>
      <td>MO</td>
    </tr>
    <tr>
      <th>3642768</th>
      <td>2017-05-31</td>
      <td>57.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Rocky Ford</td>
      <td>Otero</td>
      <td>CO</td>
    </tr>
    <tr>
      <th>3643131</th>
      <td>2017-05-31</td>
      <td>52.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Salem</td>
      <td>Salem</td>
      <td>NJ</td>
    </tr>
    <tr>
      <th>3643139</th>
      <td>2017-05-31</td>
      <td>87.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Salina</td>
      <td>Sevier</td>
      <td>UT</td>
    </tr>
    <tr>
      <th>3643199</th>
      <td>2017-05-31</td>
      <td>57.0</td>
      <td>5</td>
      <td>2017</td>
      <td>San Manuel</td>
      <td>Pinal</td>
      <td>AZ</td>
    </tr>
    <tr>
      <th>3645011</th>
      <td>2017-05-31</td>
      <td>30.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Town of Friendship</td>
      <td>Allegany</td>
      <td>NY</td>
    </tr>
    <tr>
      <th>3645060</th>
      <td>2017-05-31</td>
      <td>51.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Town of Houlton</td>
      <td>Aroostook</td>
      <td>ME</td>
    </tr>
    <tr>
      <th>3645262</th>
      <td>2017-05-31</td>
      <td>79.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Town of Springfield</td>
      <td>Windsor</td>
      <td>VT</td>
    </tr>
    <tr>
      <th>3645379</th>
      <td>2017-05-31</td>
      <td>43.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Trimont</td>
      <td>Martin</td>
      <td>MN</td>
    </tr>
    <tr>
      <th>3645822</th>
      <td>2017-05-31</td>
      <td>57.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Vivian</td>
      <td>Caddo</td>
      <td>LA</td>
    </tr>
    <tr>
      <th>3646033</th>
      <td>2017-05-31</td>
      <td>493.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Washington</td>
      <td>District of Columbia</td>
      <td>DC</td>
    </tr>
    <tr>
      <th>3646484</th>
      <td>2017-05-31</td>
      <td>53.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Westwood</td>
      <td>Boyd</td>
      <td>KY</td>
    </tr>
    <tr>
      <th>3646497</th>
      <td>2017-05-31</td>
      <td>35.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Wewoka</td>
      <td>Seminole</td>
      <td>OK</td>
    </tr>
    <tr>
      <th>3646983</th>
      <td>2017-05-31</td>
      <td>101.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Wyoming</td>
      <td>Kent</td>
      <td>DE</td>
    </tr>
    <tr>
      <th>3647038</th>
      <td>2017-05-31</td>
      <td>30.0</td>
      <td>5</td>
      <td>2017</td>
      <td>Youngstown</td>
      <td>Mahoning</td>
      <td>OH</td>
    </tr>
  </tbody>
</table>
</div>




```python
min_graph = sns.barplot(x="State", y="ZHVIPerSqft_AllHomes", data=q2_a[q2_min])
min_graph.set_xticklabels(min_graph.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'NM'),
     Text(0, 0, 'NH'),
     Text(0, 0, 'TX'),
     Text(0, 0, 'AL'),
     Text(0, 0, 'IL'),
     Text(0, 0, 'UT'),
     Text(0, 0, 'KS'),
     Text(0, 0, 'FL'),
     Text(0, 0, 'NE'),
     Text(0, 0, 'VA'),
     Text(0, 0, 'SD'),
     Text(0, 0, 'AZ'),
     Text(0, 0, 'GA'),
     Text(0, 0, 'AK'),
     Text(0, 0, 'NC'),
     Text(0, 0, 'SC'),
     Text(0, 0, 'ND'),
     Text(0, 0, 'TN'),
     Text(0, 0, 'MS'),
     Text(0, 0, 'WY'),
     Text(0, 0, 'DE'),
     Text(0, 0, 'IN'),
     Text(0, 0, 'CT'),
     Text(0, 0, 'WA'),
     Text(0, 0, 'ID'),
     Text(0, 0, 'MO'),
     Text(0, 0, 'NV'),
     Text(0, 0, 'MT'),
     Text(0, 0, 'MD'),
     Text(0, 0, 'PA'),
     Text(0, 0, 'IA'),
     Text(0, 0, 'CA'),
     Text(0, 0, 'MN'),
     Text(0, 0, 'WV'),
     Text(0, 0, 'WI'),
     Text(0, 0, 'MA'),
     Text(0, 0, 'RI'),
     Text(0, 0, 'OR'),
     Text(0, 0, 'HI'),
     Text(0, 0, 'AR'),
     Text(0, 0, 'MI'),
     Text(0, 0, 'CO'),
     Text(0, 0, 'NJ'),
     Text(0, 0, 'NY'),
     Text(0, 0, 'ME'),
     Text(0, 0, 'VT'),
     Text(0, 0, 'LA'),
     Text(0, 0, 'DC'),
     Text(0, 0, 'KY'),
     Text(0, 0, 'OK'),
     Text(0, 0, 'OH')]




![png](output_39_1.png)
<img src="/assets/images/zillow/output_39_1.png" width="100%">




```python

```

**QUESTION 3: Determine which cities have the highest overall increase in housing prices over the
last 10, 5, and 1 year. (Going back from the most current year in the data - 2017)**

Calculate the difference between square foot price for each city from 2016 – 2017,
2012 – 2017, and 2007 – 2017. Which cities have the largest increases? Which have
the least? Plot in seaborn for each of the time series in question.


```python
q3 = city_state_data[["Date","RegionName","ZHVIPerSqft_AllHomes","Year","Month","City","County","State"]]
q3 = q3.dropna()
q3.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Year</th>
      <th>Month</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1996-04-30</td>
      <td>aberdeenbinghamid</td>
      <td>96.0</td>
      <td>1996</td>
      <td>4</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1996-04-30</td>
      <td>aberdeenharfordmd</td>
      <td>76.0</td>
      <td>1996</td>
      <td>4</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1996-04-30</td>
      <td>abernathyhaletx</td>
      <td>48.0</td>
      <td>1996</td>
      <td>4</td>
      <td>Abernathy</td>
      <td>Hale</td>
      <td>TX</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1996-04-30</td>
      <td>abingdonharfordmd</td>
      <td>77.0</td>
      <td>1996</td>
      <td>4</td>
      <td>Abingdon</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1996-04-30</td>
      <td>abingdonwashingtonva</td>
      <td>57.0</td>
      <td>1996</td>
      <td>4</td>
      <td>Abingdon</td>
      <td>Washington</td>
      <td>VA</td>
    </tr>
  </tbody>
</table>
</div>




```python
sqft_2017a = q3.loc[q3['Year']==2017]
sqft_2017 = sqft_2017a.loc[sqft_2017a['Month']==5]
sqft_2016a = q3.loc[q3['Year']==2016]
sqft_2016 = sqft_2016a.loc[sqft_2016a['Month']==5]
```


```python
sqft_2017.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Year</th>
      <th>Month</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3630513</th>
      <td>2017-05-31</td>
      <td>abbevillelafayettems</td>
      <td>92.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Abbeville</td>
      <td>Lafayette</td>
      <td>MS</td>
    </tr>
    <tr>
      <th>3630515</th>
      <td>2017-05-31</td>
      <td>abbottstownadamspa</td>
      <td>121.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3630516</th>
      <td>2017-05-31</td>
      <td>aberdeenbinghamid</td>
      <td>90.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>3630518</th>
      <td>2017-05-31</td>
      <td>aberdeengrays_harborwa</td>
      <td>82.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3630519</th>
      <td>2017-05-31</td>
      <td>aberdeenharfordmd</td>
      <td>142.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
  </tbody>
</table>
</div>




```python
sqft_2016.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>Year</th>
      <th>Month</th>
      <th>City</th>
      <th>County</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3431864</th>
      <td>2016-05-31</td>
      <td>abbevillelafayettems</td>
      <td>84.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Abbeville</td>
      <td>Lafayette</td>
      <td>MS</td>
    </tr>
    <tr>
      <th>3431866</th>
      <td>2016-05-31</td>
      <td>abbottstownadamspa</td>
      <td>117.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
    </tr>
    <tr>
      <th>3431867</th>
      <td>2016-05-31</td>
      <td>aberdeenbinghamid</td>
      <td>81.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
    </tr>
    <tr>
      <th>3431869</th>
      <td>2016-05-31</td>
      <td>aberdeengrays_harborwa</td>
      <td>69.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
    </tr>
    <tr>
      <th>3431870</th>
      <td>2016-05-31</td>
      <td>aberdeenharfordmd</td>
      <td>138.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
    </tr>
  </tbody>
</table>
</div>




```python
#x = sqft_2017.head(200)
#x.sort_values(by="ZHVIPerSqft_AllHomes",ascending=False)
```


```python
#sqft_2016.head()
comparison_test = pd.merge(sqft_2017,sqft_2016, on='RegionName')
#comparison_test.head(100)
```


```python
comparison_a = pd.merge(sqft_2017,sqft_2016, on='RegionName')
#comparison_a = comparison_a[["RegionName_x","ZHVIPerSqft_AllHomes_x","Year_x","City","State_x","ZHVIPerSqft_AllHomes_y","Year_y"]]
comparison_a['Dif'] = comparison_a["ZHVIPerSqft_AllHomes_x"] - comparison_a["ZHVIPerSqft_AllHomes_y"]
```


```python
comparison_a.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-05-31</td>
      <td>abbevillelafayettems</td>
      <td>92.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Abbeville</td>
      <td>Lafayette</td>
      <td>MS</td>
      <td>2016-05-31</td>
      <td>84.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Abbeville</td>
      <td>Lafayette</td>
      <td>MS</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-05-31</td>
      <td>abbottstownadamspa</td>
      <td>121.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
      <td>2016-05-31</td>
      <td>117.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Abbottstown</td>
      <td>Adams</td>
      <td>PA</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-05-31</td>
      <td>aberdeenbinghamid</td>
      <td>90.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
      <td>2016-05-31</td>
      <td>81.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Bingham</td>
      <td>ID</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2017-05-31</td>
      <td>aberdeengrays_harborwa</td>
      <td>82.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
      <td>2016-05-31</td>
      <td>69.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Grays Harbor</td>
      <td>WA</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2017-05-31</td>
      <td>aberdeenharfordmd</td>
      <td>142.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
      <td>2016-05-31</td>
      <td>138.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aberdeen</td>
      <td>Harford</td>
      <td>MD</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
comparison_a.iloc[comparison_a["Dif"].idxmax()]
```




    Date_x                     2017-05-31 00:00:00
    RegionName                stinson_beachmarinca
    ZHVIPerSqft_AllHomes_x                    1709
    Year_x                                    2017
    Month_x                                      5
    City_x                           Stinson Beach
    County_x                                 Marin
    State_x                                     CA
    Date_y                     2016-05-31 00:00:00
    ZHVIPerSqft_AllHomes_y                    1575
    Year_y                                    2016
    Month_y                                      5
    City_y                           Stinson Beach
    County_y                                 Marin
    State_y                                     CA
    Dif                                        134
    Name: 10096, dtype: object




```python
comparison_a_graph = comparison_a.sort_values(by=["Dif"],ascending=False)
comparison_a_graph = comparison_a_graph.head(20)
comparison_a_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10096</th>
      <td>2017-05-31</td>
      <td>stinson_beachmarinca</td>
      <td>1709.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>1575.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>134.0</td>
    </tr>
    <tr>
      <th>352</th>
      <td>2017-05-31</td>
      <td>athertonsan_mateoca</td>
      <td>1746.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>1633.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>113.0</td>
    </tr>
    <tr>
      <th>11451</th>
      <td>2017-05-31</td>
      <td>water_millsuffolkny</td>
      <td>1185.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Water Mill</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>2016-05-31</td>
      <td>1082.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Water Mill</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>103.0</td>
    </tr>
    <tr>
      <th>10367</th>
      <td>2017-05-31</td>
      <td>telluridesan_miguelco</td>
      <td>667.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Telluride</td>
      <td>San Miguel</td>
      <td>CO</td>
      <td>2016-05-31</td>
      <td>566.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Telluride</td>
      <td>San Miguel</td>
      <td>CO</td>
      <td>101.0</td>
    </tr>
    <tr>
      <th>9892</th>
      <td>2017-05-31</td>
      <td>southamptonsuffolkny</td>
      <td>744.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Southampton</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>2016-05-31</td>
      <td>643.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Southampton</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>101.0</td>
    </tr>
    <tr>
      <th>1585</th>
      <td>2017-05-31</td>
      <td>cayucossan_luis_obispoca</td>
      <td>712.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Cayucos</td>
      <td>San Luis Obispo</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>612.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Cayucos</td>
      <td>San Luis Obispo</td>
      <td>CA</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>340</th>
      <td>2017-05-31</td>
      <td>aspenpitkinco</td>
      <td>1132.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Aspen</td>
      <td>Pitkin</td>
      <td>CO</td>
      <td>2016-05-31</td>
      <td>1039.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Aspen</td>
      <td>Pitkin</td>
      <td>CO</td>
      <td>93.0</td>
    </tr>
    <tr>
      <th>2899</th>
      <td>2017-05-31</td>
      <td>east_palo_altosan_mateoca</td>
      <td>689.0</td>
      <td>2017</td>
      <td>5</td>
      <td>East Palo Alto</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>596.0</td>
      <td>2016</td>
      <td>5</td>
      <td>East Palo Alto</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>93.0</td>
    </tr>
    <tr>
      <th>5966</th>
      <td>2017-05-31</td>
      <td>los_altos_hillssanta_claraca</td>
      <td>1336.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>1244.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>7954</th>
      <td>2017-05-31</td>
      <td>palo_altosanta_claraca</td>
      <td>1574.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>1485.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>89.0</td>
    </tr>
    <tr>
      <th>11144</th>
      <td>2017-05-31</td>
      <td>vaileagleco</td>
      <td>631.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Vail</td>
      <td>Eagle</td>
      <td>CO</td>
      <td>2016-05-31</td>
      <td>542.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Vail</td>
      <td>Eagle</td>
      <td>CO</td>
      <td>89.0</td>
    </tr>
    <tr>
      <th>4405</th>
      <td>2017-05-31</td>
      <td>harrisonhudsonnj</td>
      <td>707.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Harrison</td>
      <td>Hudson</td>
      <td>NJ</td>
      <td>2016-05-31</td>
      <td>621.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Harrison</td>
      <td>Hudson</td>
      <td>NJ</td>
      <td>86.0</td>
    </tr>
    <tr>
      <th>5372</th>
      <td>2017-05-31</td>
      <td>la_hondasan_mateoca</td>
      <td>718.0</td>
      <td>2017</td>
      <td>5</td>
      <td>La Honda</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>636.0</td>
      <td>2016</td>
      <td>5</td>
      <td>La Honda</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>82.0</td>
    </tr>
    <tr>
      <th>11546</th>
      <td>2017-05-31</td>
      <td>weehawkenhudsonnj</td>
      <td>416.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Weehawken</td>
      <td>Hudson</td>
      <td>NJ</td>
      <td>2016-05-31</td>
      <td>335.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Weehawken</td>
      <td>Hudson</td>
      <td>NJ</td>
      <td>81.0</td>
    </tr>
    <tr>
      <th>7572</th>
      <td>2017-05-31</td>
      <td>noyacksuffolkny</td>
      <td>636.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Noyack</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>2016-05-31</td>
      <td>556.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Noyack</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>80.0</td>
    </tr>
    <tr>
      <th>5581</th>
      <td>2017-05-31</td>
      <td>larkspurmarinca</td>
      <td>840.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Larkspur</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>762.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Larkspur</td>
      <td>Marin</td>
      <td>CA</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>10505</th>
      <td>2017-05-31</td>
      <td>topangalos_angelesca</td>
      <td>787.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Topanga</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>710.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Topanga</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>77.0</td>
    </tr>
    <tr>
      <th>6466</th>
      <td>2017-05-31</td>
      <td>medinakingwa</td>
      <td>764.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Medina</td>
      <td>King</td>
      <td>WA</td>
      <td>2016-05-31</td>
      <td>687.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Medina</td>
      <td>King</td>
      <td>WA</td>
      <td>77.0</td>
    </tr>
    <tr>
      <th>760</th>
      <td>2017-05-31</td>
      <td>berkeleyalamedaca</td>
      <td>765.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Berkeley</td>
      <td>Alameda</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>688.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Berkeley</td>
      <td>Alameda</td>
      <td>CA</td>
      <td>77.0</td>
    </tr>
    <tr>
      <th>4960</th>
      <td>2017-05-31</td>
      <td>invernessmarinca</td>
      <td>726.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Inverness</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2016-05-31</td>
      <td>650.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Inverness</td>
      <td>Marin</td>
      <td>CA</td>
      <td>76.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
len(comparison_a_graph)
```




    20




```python
comparison_a_graph.to_csv("comparison_a_graph.csv",encoding='utf-8', index=False)
```


```python
sns.lineplot(x="State_x", y="ZHVIPerSqft_AllHomes_x",data=comparison_a_graph)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x1a31652cc0>




![png](output_55_1.png)
<img src="/assets/images/zillow/output_55_1.png" width="100%">




```python
test_graph = sns.barplot(x="State_x", y="ZHVIPerSqft_AllHomes_x", data=comparison_a_graph)
test_graph.set_xticklabels(max_graph.get_xticklabels(), rotation=90,size=7)
```




    [Text(0, 0, 'VA'),
     Text(0, 0, 'CO'),
     Text(0, 0, 'CA'),
     Text(0, 0, 'TN'),
     Text(0, 0, 'DE')]




![png](output_56_1.png)
<img src="/assets/images/zillow/output_56_1.png" width="100%">




```python
comparison_a.iloc[comparison_a["Dif"].idxmin()]
```




    Date_x                          2017-05-31 00:00:00
    RegionName                fisher_islandmiami_dadefl
    ZHVIPerSqft_AllHomes_x                         1098
    Year_x                                         2017
    Month_x                                           5
    City_x                                Fisher Island
    County_x                                 Miami-Dade
    State_x                                          FL
    Date_y                          2016-05-31 00:00:00
    ZHVIPerSqft_AllHomes_y                         1183
    Year_y                                         2016
    Month_y                                           5
    City_y                                Fisher Island
    County_y                                 Miami-Dade
    State_y                                          FL
    Dif                                             -85
    Name: 3426, dtype: object




```python
comparison_a2_graph = comparison_a.sort_values(by=["Dif"],ascending=True)
comparison_a2_graph = comparison_a2_graph.head(20)
comparison_a2_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3426</th>
      <td>2017-05-31</td>
      <td>fisher_islandmiami_dadefl</td>
      <td>1098.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Fisher Island</td>
      <td>Miami-Dade</td>
      <td>FL</td>
      <td>2016-05-31</td>
      <td>1183.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Fisher Island</td>
      <td>Miami-Dade</td>
      <td>FL</td>
      <td>-85.0</td>
    </tr>
    <tr>
      <th>9735</th>
      <td>2017-05-31</td>
      <td>snowmass_villagepitkinco</td>
      <td>634.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Snowmass Village</td>
      <td>Pitkin</td>
      <td>CO</td>
      <td>2016-05-31</td>
      <td>679.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Snowmass Village</td>
      <td>Pitkin</td>
      <td>CO</td>
      <td>-45.0</td>
    </tr>
    <tr>
      <th>8269</th>
      <td>2017-05-31</td>
      <td>piney_pointharristx</td>
      <td>307.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Piney Point</td>
      <td>Harris</td>
      <td>TX</td>
      <td>2016-05-31</td>
      <td>347.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Piney Point</td>
      <td>Harris</td>
      <td>TX</td>
      <td>-40.0</td>
    </tr>
    <tr>
      <th>10845</th>
      <td>2017-05-31</td>
      <td>town_of_scarboroughcumberlandme</td>
      <td>276.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Town of Scarborough</td>
      <td>Cumberland</td>
      <td>ME</td>
      <td>2016-05-31</td>
      <td>314.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Town of Scarborough</td>
      <td>Cumberland</td>
      <td>ME</td>
      <td>-38.0</td>
    </tr>
    <tr>
      <th>9909</th>
      <td>2017-05-31</td>
      <td>southside_placeharristx</td>
      <td>296.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Southside Place</td>
      <td>Harris</td>
      <td>TX</td>
      <td>2016-05-31</td>
      <td>329.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Southside Place</td>
      <td>Harris</td>
      <td>TX</td>
      <td>-33.0</td>
    </tr>
    <tr>
      <th>4043</th>
      <td>2017-05-31</td>
      <td>grand_forksgrand_forksnd</td>
      <td>109.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Grand Forks</td>
      <td>Grand Forks</td>
      <td>ND</td>
      <td>2016-05-31</td>
      <td>137.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Grand Forks</td>
      <td>Grand Forks</td>
      <td>ND</td>
      <td>-28.0</td>
    </tr>
    <tr>
      <th>5249</th>
      <td>2017-05-31</td>
      <td>key_biscaynemiami_dadefl</td>
      <td>664.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Key Biscayne</td>
      <td>Miami-Dade</td>
      <td>FL</td>
      <td>2016-05-31</td>
      <td>688.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Key Biscayne</td>
      <td>Miami-Dade</td>
      <td>FL</td>
      <td>-24.0</td>
    </tr>
    <tr>
      <th>9009</th>
      <td>2017-05-31</td>
      <td>rooseveltduchesneut</td>
      <td>100.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Roosevelt</td>
      <td>Duchesne</td>
      <td>UT</td>
      <td>2016-05-31</td>
      <td>120.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Roosevelt</td>
      <td>Duchesne</td>
      <td>UT</td>
      <td>-20.0</td>
    </tr>
    <tr>
      <th>8558</th>
      <td>2017-05-31</td>
      <td>prophetstownwhitesideil</td>
      <td>71.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Prophetstown</td>
      <td>Whiteside</td>
      <td>IL</td>
      <td>2016-05-31</td>
      <td>89.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Prophetstown</td>
      <td>Whiteside</td>
      <td>IL</td>
      <td>-18.0</td>
    </tr>
    <tr>
      <th>5200</th>
      <td>2017-05-31</td>
      <td>kenilworthcookil</td>
      <td>417.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Kenilworth</td>
      <td>Cook</td>
      <td>IL</td>
      <td>2016-05-31</td>
      <td>435.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Kenilworth</td>
      <td>Cook</td>
      <td>IL</td>
      <td>-18.0</td>
    </tr>
    <tr>
      <th>11967</th>
      <td>2017-05-31</td>
      <td>wiltonmuscatineia</td>
      <td>111.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Wilton</td>
      <td>Muscatine</td>
      <td>IA</td>
      <td>2016-05-31</td>
      <td>129.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Wilton</td>
      <td>Muscatine</td>
      <td>IA</td>
      <td>-18.0</td>
    </tr>
    <tr>
      <th>8587</th>
      <td>2017-05-31</td>
      <td>put_in_bayottawaoh</td>
      <td>195.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Put in Bay</td>
      <td>Ottawa</td>
      <td>OH</td>
      <td>2016-05-31</td>
      <td>213.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Put in Bay</td>
      <td>Ottawa</td>
      <td>OH</td>
      <td>-18.0</td>
    </tr>
    <tr>
      <th>4695</th>
      <td>2017-05-31</td>
      <td>holdernessgraftonnh</td>
      <td>173.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Holderness</td>
      <td>Grafton</td>
      <td>NH</td>
      <td>2016-05-31</td>
      <td>189.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Holderness</td>
      <td>Grafton</td>
      <td>NH</td>
      <td>-16.0</td>
    </tr>
    <tr>
      <th>10537</th>
      <td>2017-05-31</td>
      <td>town_of_almondalleganyny</td>
      <td>50.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Town of Almond</td>
      <td>Allegany</td>
      <td>NY</td>
      <td>2016-05-31</td>
      <td>65.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Town of Almond</td>
      <td>Allegany</td>
      <td>NY</td>
      <td>-15.0</td>
    </tr>
    <tr>
      <th>11135</th>
      <td>2017-05-31</td>
      <td>uticalickingoh</td>
      <td>70.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Utica</td>
      <td>Licking</td>
      <td>OH</td>
      <td>2016-05-31</td>
      <td>84.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Utica</td>
      <td>Licking</td>
      <td>OH</td>
      <td>-14.0</td>
    </tr>
    <tr>
      <th>6540</th>
      <td>2017-05-31</td>
      <td>mettawalakeil</td>
      <td>188.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Mettawa</td>
      <td>Lake</td>
      <td>IL</td>
      <td>2016-05-31</td>
      <td>202.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Mettawa</td>
      <td>Lake</td>
      <td>IL</td>
      <td>-14.0</td>
    </tr>
    <tr>
      <th>10182</th>
      <td>2017-05-31</td>
      <td>sugarcreek_townshiparmstrongpa</td>
      <td>95.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Sugarcreek Township</td>
      <td>Armstrong</td>
      <td>PA</td>
      <td>2016-05-31</td>
      <td>108.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Sugarcreek Township</td>
      <td>Armstrong</td>
      <td>PA</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>7127</th>
      <td>2017-05-31</td>
      <td>nehalemtillamookor</td>
      <td>224.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Nehalem</td>
      <td>Tillamook</td>
      <td>OR</td>
      <td>2016-05-31</td>
      <td>237.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Nehalem</td>
      <td>Tillamook</td>
      <td>OR</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>11777</th>
      <td>2017-05-31</td>
      <td>westportfairfieldct</td>
      <td>402.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Westport</td>
      <td>Fairfield</td>
      <td>CT</td>
      <td>2016-05-31</td>
      <td>415.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Westport</td>
      <td>Fairfield</td>
      <td>CT</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>9102</th>
      <td>2017-05-31</td>
      <td>rushfordalleganyny</td>
      <td>65.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Rushford</td>
      <td>Allegany</td>
      <td>NY</td>
      <td>2016-05-31</td>
      <td>78.0</td>
      <td>2016</td>
      <td>5</td>
      <td>Rushford</td>
      <td>Allegany</td>
      <td>NY</td>
      <td>-13.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
comparison_a2_graph.to_csv("comparison_a2_graph.csv",encoding='utf-8', index=False)
```


```python
sns.lineplot(x="State_x", y="ZHVIPerSqft_AllHomes_x",data=comparison_a2_graph)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x1a354ae780>




![png](output_60_1.png)
<img src="/assets/images/zillow/output_60_1.png" width="100%">




```python
sqft_2017b = sqft_2017
sqft_2012a = q3.loc[q3['Year']==2012]
sqft_2012 = sqft_2012a.loc[sqft_2012a['Month']==5]
```


```python
comparison_b = pd.merge(sqft_2017b,sqft_2012, on='RegionName')
#comparison_b = comparison_b[["RegionName_x","ZHVIPerSqft_AllHomes_x","Year_x","City","State_x","ZHVIPerSqft_AllHomes_y","Year_y"]]
comparison_b['Dif'] = comparison_b["ZHVIPerSqft_AllHomes_x"] - comparison_b["ZHVIPerSqft_AllHomes_y"]
```


```python
#comparison_b.head()
```


```python
comparison_b.iloc[comparison_b["Dif"].idxmax()]
```




    Date_x                       2017-05-31 00:00:00
    RegionName                palo_altosanta_claraca
    ZHVIPerSqft_AllHomes_x                      1574
    Year_x                                      2017
    Month_x                                        5
    City_x                                 Palo Alto
    County_x                             Santa Clara
    State_x                                       CA
    Date_y                       2012-05-31 00:00:00
    ZHVIPerSqft_AllHomes_y                       801
    Year_y                                      2012
    Month_y                                        5
    City_y                                 Palo Alto
    County_y                             Santa Clara
    State_y                                       CA
    Dif                                          773
    Name: 7859, dtype: object




```python
comparison_b_graph = comparison_b.sort_values(by=["Dif"],ascending=False)
comparison_b_graph = comparison_b_graph.head(20)
comparison_b_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7859</th>
      <td>2017-05-31</td>
      <td>palo_altosanta_claraca</td>
      <td>1574.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>801.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>773.0</td>
    </tr>
    <tr>
      <th>349</th>
      <td>2017-05-31</td>
      <td>athertonsan_mateoca</td>
      <td>1746.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>977.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>769.0</td>
    </tr>
    <tr>
      <th>9980</th>
      <td>2017-05-31</td>
      <td>stinson_beachmarinca</td>
      <td>1709.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>1040.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>669.0</td>
    </tr>
    <tr>
      <th>9919</th>
      <td>2017-05-31</td>
      <td>stanfordsanta_claraca</td>
      <td>1286.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Stanford</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>715.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Stanford</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>571.0</td>
    </tr>
    <tr>
      <th>5896</th>
      <td>2017-05-31</td>
      <td>los_altossanta_claraca</td>
      <td>1271.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Los Altos</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>724.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Los Altos</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>547.0</td>
    </tr>
    <tr>
      <th>5895</th>
      <td>2017-05-31</td>
      <td>los_altos_hillssanta_claraca</td>
      <td>1336.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>797.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>539.0</td>
    </tr>
    <tr>
      <th>11973</th>
      <td>2017-05-31</td>
      <td>woodsidesan_mateoca</td>
      <td>1375.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Woodside</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>838.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Woodside</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>537.0</td>
    </tr>
    <tr>
      <th>8386</th>
      <td>2017-05-31</td>
      <td>portola_valleysan_mateoca</td>
      <td>1376.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Portola Valley</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>864.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Portola Valley</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>512.0</td>
    </tr>
    <tr>
      <th>6428</th>
      <td>2017-05-31</td>
      <td>menlo_parksan_mateoca</td>
      <td>1175.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Menlo Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>681.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Menlo Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>494.0</td>
    </tr>
    <tr>
      <th>6920</th>
      <td>2017-05-31</td>
      <td>mountain_viewsanta_claraca</td>
      <td>995.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Mountain View</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>501.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Mountain View</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>494.0</td>
    </tr>
    <tr>
      <th>4604</th>
      <td>2017-05-31</td>
      <td>hillsboroughsan_mateoca</td>
      <td>1224.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Hillsborough</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>745.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Hillsborough</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>479.0</td>
    </tr>
    <tr>
      <th>10120</th>
      <td>2017-05-31</td>
      <td>sunnyvalesanta_claraca</td>
      <td>940.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Sunnyvale</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>466.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Sunnyvale</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>474.0</td>
    </tr>
    <tr>
      <th>7338</th>
      <td>2017-05-31</td>
      <td>north_fair_oakssan_mateoca</td>
      <td>821.0</td>
      <td>2017</td>
      <td>5</td>
      <td>North Fair Oaks</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>354.0</td>
      <td>2012</td>
      <td>5</td>
      <td>North Fair Oaks</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>467.0</td>
    </tr>
    <tr>
      <th>817</th>
      <td>2017-05-31</td>
      <td>beverly_hillslos_angelesca</td>
      <td>1140.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Beverly Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>677.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Beverly Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>463.0</td>
    </tr>
    <tr>
      <th>2868</th>
      <td>2017-05-31</td>
      <td>east_palo_altosan_mateoca</td>
      <td>689.0</td>
      <td>2017</td>
      <td>5</td>
      <td>East Palo Alto</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>250.0</td>
      <td>2012</td>
      <td>5</td>
      <td>East Palo Alto</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>439.0</td>
    </tr>
    <tr>
      <th>713</th>
      <td>2017-05-31</td>
      <td>belvederemarinca</td>
      <td>1333.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Belvedere</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>896.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Belvedere</td>
      <td>Marin</td>
      <td>CA</td>
      <td>437.0</td>
    </tr>
    <tr>
      <th>6124</th>
      <td>2017-05-31</td>
      <td>manhattan_beachlos_angelesca</td>
      <td>1039.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Manhattan Beach</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>605.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Manhattan Beach</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>434.0</td>
    </tr>
    <tr>
      <th>2364</th>
      <td>2017-05-31</td>
      <td>cupertinosanta_claraca</td>
      <td>1009.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Cupertino</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>576.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Cupertino</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>433.0</td>
    </tr>
    <tr>
      <th>4582</th>
      <td>2017-05-31</td>
      <td>highlands_baywood_parksan_mateoca</td>
      <td>963.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Highlands-Baywood Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2012-05-31</td>
      <td>533.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Highlands-Baywood Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>430.0</td>
    </tr>
    <tr>
      <th>9040</th>
      <td>2017-05-31</td>
      <td>sag_harborsuffolkny</td>
      <td>1029.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Sag Harbor</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>2012-05-31</td>
      <td>604.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Sag Harbor</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>425.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
comparison_b_graph.to_csv("comparison_b_graph.csv",encoding='utf-8', index=False)
```


```python
comparison_b2_graph = comparison_b.sort_values(by=["Dif"],ascending=True)
comparison_b2_graph = comparison_b2_graph.head(20)
comparison_b2_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8903</th>
      <td>2017-05-31</td>
      <td>rooseveltduchesneut</td>
      <td>100.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Roosevelt</td>
      <td>Duchesne</td>
      <td>UT</td>
      <td>2012-05-31</td>
      <td>160.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Roosevelt</td>
      <td>Duchesne</td>
      <td>UT</td>
      <td>-60.0</td>
    </tr>
    <tr>
      <th>9792</th>
      <td>2017-05-31</td>
      <td>southportlincolnme</td>
      <td>302.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Southport</td>
      <td>Lincoln</td>
      <td>ME</td>
      <td>2012-05-31</td>
      <td>331.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Southport</td>
      <td>Lincoln</td>
      <td>ME</td>
      <td>-29.0</td>
    </tr>
    <tr>
      <th>11102</th>
      <td>2017-05-31</td>
      <td>versaillesdarkeoh</td>
      <td>83.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Versailles</td>
      <td>Darke</td>
      <td>OH</td>
      <td>2012-05-31</td>
      <td>106.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Versailles</td>
      <td>Darke</td>
      <td>OH</td>
      <td>-23.0</td>
    </tr>
    <tr>
      <th>4121</th>
      <td>2017-05-31</td>
      <td>greenvilledarkeoh</td>
      <td>69.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Greenville</td>
      <td>Darke</td>
      <td>OH</td>
      <td>2012-05-31</td>
      <td>90.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Greenville</td>
      <td>Darke</td>
      <td>OH</td>
      <td>-21.0</td>
    </tr>
    <tr>
      <th>2606</th>
      <td>2017-05-31</td>
      <td>dickinsonstarknd</td>
      <td>172.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Dickinson</td>
      <td>Stark</td>
      <td>ND</td>
      <td>2012-05-31</td>
      <td>193.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Dickinson</td>
      <td>Stark</td>
      <td>ND</td>
      <td>-21.0</td>
    </tr>
    <tr>
      <th>258</th>
      <td>2017-05-31</td>
      <td>arcanumdarkeoh</td>
      <td>70.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Arcanum</td>
      <td>Darke</td>
      <td>OH</td>
      <td>2012-05-31</td>
      <td>90.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Arcanum</td>
      <td>Darke</td>
      <td>OH</td>
      <td>-20.0</td>
    </tr>
    <tr>
      <th>11080</th>
      <td>2017-05-31</td>
      <td>ventnor_cityatlanticnj</td>
      <td>164.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Ventnor City</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>2012-05-31</td>
      <td>181.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Ventnor City</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>-17.0</td>
    </tr>
    <tr>
      <th>5747</th>
      <td>2017-05-31</td>
      <td>linwooddelawarepa</td>
      <td>64.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Linwood</td>
      <td>Delaware</td>
      <td>PA</td>
      <td>2012-05-31</td>
      <td>79.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Linwood</td>
      <td>Delaware</td>
      <td>PA</td>
      <td>-15.0</td>
    </tr>
    <tr>
      <th>3707</th>
      <td>2017-05-31</td>
      <td>galenajo_daviessil</td>
      <td>90.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Galena</td>
      <td>Jo Daviess</td>
      <td>IL</td>
      <td>2012-05-31</td>
      <td>104.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Galena</td>
      <td>Jo Daviess</td>
      <td>IL</td>
      <td>-14.0</td>
    </tr>
    <tr>
      <th>5090</th>
      <td>2017-05-31</td>
      <td>kankakeekankakeeil</td>
      <td>58.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Kankakee</td>
      <td>Kankakee</td>
      <td>IL</td>
      <td>2012-05-31</td>
      <td>72.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Kankakee</td>
      <td>Kankakee</td>
      <td>IL</td>
      <td>-14.0</td>
    </tr>
    <tr>
      <th>1027</th>
      <td>2017-05-31</td>
      <td>bradleykankakeeil</td>
      <td>80.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Bradley</td>
      <td>Kankakee</td>
      <td>IL</td>
      <td>2012-05-31</td>
      <td>93.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Bradley</td>
      <td>Kankakee</td>
      <td>IL</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>910</th>
      <td>2017-05-31</td>
      <td>blue_earthfaribaultmn</td>
      <td>91.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Blue Earth</td>
      <td>Faribault</td>
      <td>MN</td>
      <td>2012-05-31</td>
      <td>104.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Blue Earth</td>
      <td>Faribault</td>
      <td>MN</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>5973</th>
      <td>2017-05-31</td>
      <td>lumbertonlamarms</td>
      <td>59.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Lumberton</td>
      <td>Lamar</td>
      <td>MS</td>
      <td>2012-05-31</td>
      <td>72.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Lumberton</td>
      <td>Lamar</td>
      <td>MS</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>8347</th>
      <td>2017-05-31</td>
      <td>port_isabelcamerontx</td>
      <td>137.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Port Isabel</td>
      <td>Cameron</td>
      <td>TX</td>
      <td>2012-05-31</td>
      <td>150.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Port Isabel</td>
      <td>Cameron</td>
      <td>TX</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>201</th>
      <td>2017-05-31</td>
      <td>andrewsandrewstx</td>
      <td>96.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Andrews</td>
      <td>Andrews</td>
      <td>TX</td>
      <td>2012-05-31</td>
      <td>109.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Andrews</td>
      <td>Andrews</td>
      <td>TX</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>9073</th>
      <td>2017-05-31</td>
      <td>saint_henrymerceroh</td>
      <td>104.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Saint Henry</td>
      <td>Mercer</td>
      <td>OH</td>
      <td>2012-05-31</td>
      <td>116.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Saint Henry</td>
      <td>Mercer</td>
      <td>OH</td>
      <td>-12.0</td>
    </tr>
    <tr>
      <th>11023</th>
      <td>2017-05-31</td>
      <td>vails_gateorangeny</td>
      <td>133.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Vails Gate</td>
      <td>Orange</td>
      <td>NY</td>
      <td>2012-05-31</td>
      <td>145.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Vails Gate</td>
      <td>Orange</td>
      <td>NY</td>
      <td>-12.0</td>
    </tr>
    <tr>
      <th>5745</th>
      <td>2017-05-31</td>
      <td>linwoodatlanticnj</td>
      <td>121.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Linwood</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>2012-05-31</td>
      <td>133.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Linwood</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>-12.0</td>
    </tr>
    <tr>
      <th>2191</th>
      <td>2017-05-31</td>
      <td>corollacurritucknc</td>
      <td>185.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Corolla</td>
      <td>Currituck</td>
      <td>NC</td>
      <td>2012-05-31</td>
      <td>197.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Corolla</td>
      <td>Currituck</td>
      <td>NC</td>
      <td>-12.0</td>
    </tr>
    <tr>
      <th>10811</th>
      <td>2017-05-31</td>
      <td>trainerdelawarepa</td>
      <td>71.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Trainer</td>
      <td>Delaware</td>
      <td>PA</td>
      <td>2012-05-31</td>
      <td>82.0</td>
      <td>2012</td>
      <td>5</td>
      <td>Trainer</td>
      <td>Delaware</td>
      <td>PA</td>
      <td>-11.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
comparison_b2_graph.to_csv("comparison_b2_graph.csv",encoding='utf-8', index=False)
```


```python
sqft_2017c = sqft_2017
sqft_2007a = q3.loc[q3['Year']==2007]
sqft_2007 = sqft_2007a.loc[sqft_2007a['Month']==5]
```


```python
comparison_c = pd.merge(sqft_2017c,sqft_2007, on='RegionName')
#comparison_c = comparison_c[["RegionName_x","ZHVIPerSqft_AllHomes_x","Year_x","City","State_x","ZHVIPerSqft_AllHomes_y","Year_y"]]
comparison_c['Dif'] = comparison_c["ZHVIPerSqft_AllHomes_x"] - comparison_c["ZHVIPerSqft_AllHomes_y"]
```


```python
comparison_c.iloc[comparison_c["Dif"].idxmax()]
```




    Date_x                       2017-05-31 00:00:00
    RegionName                palo_altosanta_claraca
    ZHVIPerSqft_AllHomes_x                      1574
    Year_x                                      2017
    Month_x                                        5
    City_x                                 Palo Alto
    County_x                             Santa Clara
    State_x                                       CA
    Date_y                       2007-05-31 00:00:00
    ZHVIPerSqft_AllHomes_y                       753
    Year_y                                      2007
    Month_y                                        5
    City_y                                 Palo Alto
    County_y                             Santa Clara
    State_y                                       CA
    Dif                                          821
    Name: 7262, dtype: object




```python
comparison_c_graph = comparison_c.sort_values(by=["Dif"],ascending=False)
comparison_c_graph = comparison_c_graph.head(20)
comparison_c_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7262</th>
      <td>2017-05-31</td>
      <td>palo_altosanta_claraca</td>
      <td>1574.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>753.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Palo Alto</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>821.0</td>
    </tr>
    <tr>
      <th>320</th>
      <td>2017-05-31</td>
      <td>athertonsan_mateoca</td>
      <td>1746.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>1058.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Atherton</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>688.0</td>
    </tr>
    <tr>
      <th>9242</th>
      <td>2017-05-31</td>
      <td>stinson_beachmarinca</td>
      <td>1709.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>1060.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Stinson Beach</td>
      <td>Marin</td>
      <td>CA</td>
      <td>649.0</td>
    </tr>
    <tr>
      <th>5440</th>
      <td>2017-05-31</td>
      <td>los_altossanta_claraca</td>
      <td>1271.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Los Altos</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>725.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Los Altos</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>546.0</td>
    </tr>
    <tr>
      <th>9185</th>
      <td>2017-05-31</td>
      <td>stanfordsanta_claraca</td>
      <td>1286.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Stanford</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>751.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Stanford</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>535.0</td>
    </tr>
    <tr>
      <th>5439</th>
      <td>2017-05-31</td>
      <td>los_altos_hillssanta_claraca</td>
      <td>1336.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>871.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Los Altos Hills</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>465.0</td>
    </tr>
    <tr>
      <th>6386</th>
      <td>2017-05-31</td>
      <td>mountain_viewsanta_claraca</td>
      <td>995.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Mountain View</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>546.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Mountain View</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>449.0</td>
    </tr>
    <tr>
      <th>5925</th>
      <td>2017-05-31</td>
      <td>menlo_parksan_mateoca</td>
      <td>1175.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Menlo Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>728.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Menlo Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>447.0</td>
    </tr>
    <tr>
      <th>11098</th>
      <td>2017-05-31</td>
      <td>woodsidesan_mateoca</td>
      <td>1375.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Woodside</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>958.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Woodside</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>417.0</td>
    </tr>
    <tr>
      <th>2169</th>
      <td>2017-05-31</td>
      <td>cupertinosanta_claraca</td>
      <td>1009.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Cupertino</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>594.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Cupertino</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>415.0</td>
    </tr>
    <tr>
      <th>4218</th>
      <td>2017-05-31</td>
      <td>highlands_baywood_parksan_mateoca</td>
      <td>963.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Highlands-Baywood Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>550.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Highlands-Baywood Park</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>413.0</td>
    </tr>
    <tr>
      <th>9370</th>
      <td>2017-05-31</td>
      <td>sunnyvalesanta_claraca</td>
      <td>940.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Sunnyvale</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>534.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Sunnyvale</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>406.0</td>
    </tr>
    <tr>
      <th>1164</th>
      <td>2017-05-31</td>
      <td>burlingamesan_mateoca</td>
      <td>1034.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Burlingame</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>640.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Burlingame</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>394.0</td>
    </tr>
    <tr>
      <th>7754</th>
      <td>2017-05-31</td>
      <td>portola_valleysan_mateoca</td>
      <td>1376.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Portola Valley</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>987.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Portola Valley</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>389.0</td>
    </tr>
    <tr>
      <th>8359</th>
      <td>2017-05-31</td>
      <td>sag_harborsuffolkny</td>
      <td>1029.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Sag Harbor</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>2007-05-31</td>
      <td>647.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Sag Harbor</td>
      <td>Suffolk</td>
      <td>NY</td>
      <td>382.0</td>
    </tr>
    <tr>
      <th>650</th>
      <td>2017-05-31</td>
      <td>belvederemarinca</td>
      <td>1333.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Belvedere</td>
      <td>Marin</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>958.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Belvedere</td>
      <td>Marin</td>
      <td>CA</td>
      <td>375.0</td>
    </tr>
    <tr>
      <th>642</th>
      <td>2017-05-31</td>
      <td>belmontsan_mateoca</td>
      <td>907.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Belmont</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>537.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Belmont</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>370.0</td>
    </tr>
    <tr>
      <th>8564</th>
      <td>2017-05-31</td>
      <td>saratogasanta_claraca</td>
      <td>1025.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Saratoga</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>680.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Saratoga</td>
      <td>Santa Clara</td>
      <td>CA</td>
      <td>345.0</td>
    </tr>
    <tr>
      <th>741</th>
      <td>2017-05-31</td>
      <td>beverly_hillslos_angelesca</td>
      <td>1140.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Beverly Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>797.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Beverly Hills</td>
      <td>Los Angeles</td>
      <td>CA</td>
      <td>343.0</td>
    </tr>
    <tr>
      <th>8471</th>
      <td>2017-05-31</td>
      <td>san_carlossan_mateoca</td>
      <td>929.0</td>
      <td>2017</td>
      <td>5</td>
      <td>San Carlos</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>594.0</td>
      <td>2007</td>
      <td>5</td>
      <td>San Carlos</td>
      <td>San Mateo</td>
      <td>CA</td>
      <td>335.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
comparison_c_graph.to_csv("comparison_c_graph.csv",encoding='utf-8', index=False)
```


```python
sns.lineplot(x="State_x", y="ZHVIPerSqft_AllHomes_x",data=comparison_c_graph)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x1a357b9c50>




![png](output_74_1.png)
<img src="/assets/images/zillow/output_74_1.png" width="100%">




```python
comparison_c2_graph = comparison_c.sort_values(by=["Dif"],ascending=True)
comparison_c2_graph = comparison_c2_graph.head(21)
comparison_c2_graph
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date_x</th>
      <th>RegionName</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_x</th>
      <th>Month_x</th>
      <th>City_x</th>
      <th>County_x</th>
      <th>State_x</th>
      <th>Date_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Year_y</th>
      <th>Month_y</th>
      <th>City_y</th>
      <th>County_y</th>
      <th>State_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4844</th>
      <td>2017-05-31</td>
      <td>kirkwoodalpineca</td>
      <td>283.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Kirkwood</td>
      <td>Alpine</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>528.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Kirkwood</td>
      <td>Alpine</td>
      <td>CA</td>
      <td>-245.0</td>
    </tr>
    <tr>
      <th>11130</th>
      <td>2017-05-31</td>
      <td>wrightsville_beachnew_hanovernc</td>
      <td>555.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Wrightsville Beach</td>
      <td>New Hanover</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>758.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Wrightsville Beach</td>
      <td>New Hanover</td>
      <td>NC</td>
      <td>-203.0</td>
    </tr>
    <tr>
      <th>4678</th>
      <td>2017-05-31</td>
      <td>jupiter_islandmartinfl</td>
      <td>923.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Jupiter Island</td>
      <td>Martin</td>
      <td>FL</td>
      <td>2007-05-31</td>
      <td>1114.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Jupiter Island</td>
      <td>Martin</td>
      <td>FL</td>
      <td>-191.0</td>
    </tr>
    <tr>
      <th>940</th>
      <td>2017-05-31</td>
      <td>bradleysan_luis_obispoca</td>
      <td>246.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Bradley</td>
      <td>San Luis Obispo</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>426.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Bradley</td>
      <td>San Luis Obispo</td>
      <td>CA</td>
      <td>-180.0</td>
    </tr>
    <tr>
      <th>2741</th>
      <td>2017-05-31</td>
      <td>edisto_beachcolletonsc</td>
      <td>221.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Edisto Beach</td>
      <td>Colleton</td>
      <td>SC</td>
      <td>2007-05-31</td>
      <td>391.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Edisto Beach</td>
      <td>Colleton</td>
      <td>SC</td>
      <td>-170.0</td>
    </tr>
    <tr>
      <th>4491</th>
      <td>2017-05-31</td>
      <td>indian_beachcarteretnc</td>
      <td>221.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Indian Beach</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>389.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Indian Beach</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>-168.0</td>
    </tr>
    <tr>
      <th>326</th>
      <td>2017-05-31</td>
      <td>atlantic_beachcarteretnc</td>
      <td>205.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Atlantic Beach</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>371.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Atlantic Beach</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>-166.0</td>
    </tr>
    <tr>
      <th>5630</th>
      <td>2017-05-31</td>
      <td>mammoth_lakesmonoca</td>
      <td>296.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Mammoth Lakes</td>
      <td>Mono</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>447.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Mammoth Lakes</td>
      <td>Mono</td>
      <td>CA</td>
      <td>-151.0</td>
    </tr>
    <tr>
      <th>10797</th>
      <td>2017-05-31</td>
      <td>westwoodplumasca</td>
      <td>167.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Westwood</td>
      <td>Plumas</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>316.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Westwood</td>
      <td>Plumas</td>
      <td>CA</td>
      <td>-149.0</td>
    </tr>
    <tr>
      <th>6988</th>
      <td>2017-05-31</td>
      <td>ocean_isle_beachbrunswicknc</td>
      <td>193.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Ocean Isle Beach</td>
      <td>Brunswick</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>338.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Ocean Isle Beach</td>
      <td>Brunswick</td>
      <td>NC</td>
      <td>-145.0</td>
    </tr>
    <tr>
      <th>7538</th>
      <td>2017-05-31</td>
      <td>pine_knoll_shorescarteretnc</td>
      <td>196.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Pine Knoll Shores</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>336.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Pine Knoll Shores</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>-140.0</td>
    </tr>
    <tr>
      <th>2018</th>
      <td>2017-05-31</td>
      <td>corollacurritucknc</td>
      <td>185.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Corolla</td>
      <td>Currituck</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>323.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Corolla</td>
      <td>Currituck</td>
      <td>NC</td>
      <td>-138.0</td>
    </tr>
    <tr>
      <th>7134</th>
      <td>2017-05-31</td>
      <td>ortley_beachoceannj</td>
      <td>285.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Ortley Beach</td>
      <td>Ocean</td>
      <td>NJ</td>
      <td>2007-05-31</td>
      <td>419.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Ortley Beach</td>
      <td>Ocean</td>
      <td>NJ</td>
      <td>-134.0</td>
    </tr>
    <tr>
      <th>2099</th>
      <td>2017-05-31</td>
      <td>crescent_beachsaint_johnsfl</td>
      <td>279.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Crescent Beach</td>
      <td>Saint Johns</td>
      <td>FL</td>
      <td>2007-05-31</td>
      <td>411.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Crescent Beach</td>
      <td>Saint Johns</td>
      <td>FL</td>
      <td>-132.0</td>
    </tr>
    <tr>
      <th>1014</th>
      <td>2017-05-31</td>
      <td>brigantineatlanticnj</td>
      <td>203.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Brigantine</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>2007-05-31</td>
      <td>335.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Brigantine</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>-132.0</td>
    </tr>
    <tr>
      <th>8241</th>
      <td>2017-05-31</td>
      <td>roselandnelsonva</td>
      <td>142.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Roseland</td>
      <td>Nelson</td>
      <td>VA</td>
      <td>2007-05-31</td>
      <td>265.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Roseland</td>
      <td>Nelson</td>
      <td>VA</td>
      <td>-123.0</td>
    </tr>
    <tr>
      <th>3347</th>
      <td>2017-05-31</td>
      <td>freedomsanta_cruzca</td>
      <td>356.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Freedom</td>
      <td>Santa Cruz</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>478.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Freedom</td>
      <td>Santa Cruz</td>
      <td>CA</td>
      <td>-122.0</td>
    </tr>
    <tr>
      <th>8657</th>
      <td>2017-05-31</td>
      <td>seasidemontereyca</td>
      <td>393.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Seaside</td>
      <td>Monterey</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>513.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Seaside</td>
      <td>Monterey</td>
      <td>CA</td>
      <td>-120.0</td>
    </tr>
    <tr>
      <th>2869</th>
      <td>2017-05-31</td>
      <td>emerald_islecarteretnc</td>
      <td>232.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Emerald Isle</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>2007-05-31</td>
      <td>350.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Emerald Isle</td>
      <td>Carteret</td>
      <td>NC</td>
      <td>-118.0</td>
    </tr>
    <tr>
      <th>5415</th>
      <td>2017-05-31</td>
      <td>longportatlanticnj</td>
      <td>467.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Longport</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>2007-05-31</td>
      <td>585.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Longport</td>
      <td>Atlantic</td>
      <td>NJ</td>
      <td>-118.0</td>
    </tr>
    <tr>
      <th>1607</th>
      <td>2017-05-31</td>
      <td>chesterplumasca</td>
      <td>155.0</td>
      <td>2017</td>
      <td>5</td>
      <td>Chester</td>
      <td>Plumas</td>
      <td>CA</td>
      <td>2007-05-31</td>
      <td>272.0</td>
      <td>2007</td>
      <td>5</td>
      <td>Chester</td>
      <td>Plumas</td>
      <td>CA</td>
      <td>-117.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
sns.scatterplot(y="Dif", x="City_y", data=comparison_c2_graph)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x1a3898f7b8>




![png](output_76_1.png)
<img src="/assets/images/zillow/output_76_1.png" width="100%">




```python
sns.lineplot(x="State_x", y="ZHVIPerSqft_AllHomes_x",data=comparison_c2_graph)
```




    <matplotlib.axes._subplots.AxesSubplot at 0x1a35799780>




![png](output_77_1.png)
<img src="/assets/images/zillow/output_77_1.png" width="100%">




```python
comparison_c2_graph.to_csv("comparison_c2_graph.csv",encoding='utf-8', index=False)
```

**QUESTION 4: For a city of choice, (most likely Ann Arbor) have prices for each size of home
changed in similar amounts over the course of the datasets recordings or are there
some sizes that are more affordable or less affordable within the city?**

Calculate the mean increase for each type of home (1 bedroom, 2 bedroom, etc.) in
Ann Arbor. Calculate the average price change for each of these types of homes
year to year. Compare the average price change, is it similar or different? I think a
histogram will be a good way to visualize this, but I could potentially create a story in
Tableau which might walk the viewer through the information.


```python
q4 = city_state_data
q4 = q4[["Date","Year","Month","RegionName","ZHVI_1bedroom","ZHVI_2bedroom","ZHVI_3bedroom","ZHVI_4bedroom","ZHVI_5BedroomOrMore","ZHVIPerSqft_AllHomes","ZHVI_BottomTier","ZHVI_MiddleTier","ZHVI_SingleFamilyResidence","ZHVI_TopTier","State","County","City"]]
```


```python
q4 = q4.dropna()
q4.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Year</th>
      <th>Month</th>
      <th>RegionName</th>
      <th>ZHVI_1bedroom</th>
      <th>ZHVI_2bedroom</th>
      <th>ZHVI_3bedroom</th>
      <th>ZHVI_4bedroom</th>
      <th>ZHVI_5BedroomOrMore</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>State</th>
      <th>County</th>
      <th>City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>abingtonmontgomerypa</td>
      <td>47500.0</td>
      <td>102200.0</td>
      <td>122000.0</td>
      <td>157600.0</td>
      <td>219000.0</td>
      <td>78.0</td>
      <td>102000.0</td>
      <td>128700.0</td>
      <td>130900.0</td>
      <td>189400.0</td>
      <td>PA</td>
      <td>Montgomery</td>
      <td>Abington</td>
    </tr>
    <tr>
      <th>18</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>actonmiddlesexma</td>
      <td>52400.0</td>
      <td>122200.0</td>
      <td>212500.0</td>
      <td>288100.0</td>
      <td>325500.0</td>
      <td>118.0</td>
      <td>128200.0</td>
      <td>230500.0</td>
      <td>253900.0</td>
      <td>330100.0</td>
      <td>MA</td>
      <td>Middlesex</td>
      <td>Acton</td>
    </tr>
    <tr>
      <th>21</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>acworthcobbga</td>
      <td>62200.0</td>
      <td>75500.0</td>
      <td>100800.0</td>
      <td>155900.0</td>
      <td>201300.0</td>
      <td>60.0</td>
      <td>83900.0</td>
      <td>112900.0</td>
      <td>114800.0</td>
      <td>174000.0</td>
      <td>GA</td>
      <td>Cobb</td>
      <td>Acworth</td>
    </tr>
    <tr>
      <th>44</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>agawamhampdenma</td>
      <td>35800.0</td>
      <td>82100.0</td>
      <td>107400.0</td>
      <td>114100.0</td>
      <td>127300.0</td>
      <td>71.0</td>
      <td>68600.0</td>
      <td>101500.0</td>
      <td>106800.0</td>
      <td>124700.0</td>
      <td>MA</td>
      <td>Hampden</td>
      <td>Agawam</td>
    </tr>
    <tr>
      <th>55</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>akronsummitoh</td>
      <td>41600.0</td>
      <td>49100.0</td>
      <td>59500.0</td>
      <td>70000.0</td>
      <td>74900.0</td>
      <td>49.0</td>
      <td>42800.0</td>
      <td>57100.0</td>
      <td>56300.0</td>
      <td>88000.0</td>
      <td>OH</td>
      <td>Summit</td>
      <td>Akron</td>
    </tr>
  </tbody>
</table>
</div>




```python
ann_arbor = q4.loc[q4["RegionName"]=="ann_arborwashtenawmi"]
```


```python
ann_arbor.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Year</th>
      <th>Month</th>
      <th>RegionName</th>
      <th>ZHVI_1bedroom</th>
      <th>ZHVI_2bedroom</th>
      <th>ZHVI_3bedroom</th>
      <th>ZHVI_4bedroom</th>
      <th>ZHVI_5BedroomOrMore</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>State</th>
      <th>County</th>
      <th>City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>209</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>ann_arborwashtenawmi</td>
      <td>90300.0</td>
      <td>107300.0</td>
      <td>129000.0</td>
      <td>188500.0</td>
      <td>220200.0</td>
      <td>95.0</td>
      <td>106900.0</td>
      <td>152000.0</td>
      <td>157300.0</td>
      <td>248200.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
    <tr>
      <th>11639</th>
      <td>1996-05-31</td>
      <td>1996</td>
      <td>5</td>
      <td>ann_arborwashtenawmi</td>
      <td>87500.0</td>
      <td>107500.0</td>
      <td>130400.0</td>
      <td>188600.0</td>
      <td>219300.0</td>
      <td>96.0</td>
      <td>107900.0</td>
      <td>153100.0</td>
      <td>158500.0</td>
      <td>249500.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
    <tr>
      <th>23211</th>
      <td>1996-06-30</td>
      <td>1996</td>
      <td>6</td>
      <td>ann_arborwashtenawmi</td>
      <td>84100.0</td>
      <td>107700.0</td>
      <td>131500.0</td>
      <td>188800.0</td>
      <td>220700.0</td>
      <td>97.0</td>
      <td>108300.0</td>
      <td>154200.0</td>
      <td>159700.0</td>
      <td>250900.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
    <tr>
      <th>34842</th>
      <td>1996-07-31</td>
      <td>1996</td>
      <td>7</td>
      <td>ann_arborwashtenawmi</td>
      <td>81100.0</td>
      <td>108600.0</td>
      <td>132200.0</td>
      <td>189100.0</td>
      <td>222600.0</td>
      <td>97.0</td>
      <td>108900.0</td>
      <td>154900.0</td>
      <td>160300.0</td>
      <td>251100.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
    <tr>
      <th>46479</th>
      <td>1996-08-31</td>
      <td>1996</td>
      <td>8</td>
      <td>ann_arborwashtenawmi</td>
      <td>80700.0</td>
      <td>109200.0</td>
      <td>133200.0</td>
      <td>189500.0</td>
      <td>224800.0</td>
      <td>97.0</td>
      <td>109300.0</td>
      <td>155300.0</td>
      <td>160500.0</td>
      <td>251500.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
  </tbody>
</table>
</div>




```python
ann_arbor2017 = ann_arbor.loc[ann_arbor["Year"]==2017]
```


```python
ann_arbor2017["ZHVI_1bedroom"].median()
```




    171350.0




```python
ann_arbor2017["ZHVI_2bedroom"].median()
```




    233000.0




```python
ann_arbor2017["ZHVI_3bedroom"].median()
```




    303150.0




```python
ann_arbor2017["ZHVI_4bedroom"].median()
```




    408050.0




```python
ann_arbor2017["ZHVI_5BedroomOrMore"].median()
```




    568850.0




```python
ann_arbor2012 = ann_arbor.loc[ann_arbor["Year"]==2012]
```


```python
ann_arbor2012["ZHVI_1bedroom"].median()
```




    142800.0




```python
ann_arbor2012["ZHVI_2bedroom"].median()
```




    157750.0




```python
ann_arbor2012["ZHVI_3bedroom"].median()
```




    204450.0




```python
ann_arbor2012["ZHVI_4bedroom"].median()
```




    279500.0




```python
ann_arbor2012["ZHVI_5BedroomOrMore"].median()
```




    365800.0




```python
ann_arbor2007 = ann_arbor.loc[ann_arbor["Year"]==2007]
```


```python
ann_arbor2007["ZHVI_1bedroom"].median()
```




    160400.0




```python
ann_arbor2007["ZHVI_2bedroom"].median()
```




    173050.0




```python
ann_arbor2007["ZHVI_3bedroom"].median()
```




    220000.0




```python
ann_arbor2007["ZHVI_4bedroom"].median()
```




    295500.0




```python
ann_arbor2007["ZHVI_5BedroomOrMore"].median()
```




    403150.0




```python
ann_arbor2002 = ann_arbor.loc[ann_arbor["Year"]==2002]
```


```python
ann_arbor2002["ZHVI_1bedroom"].median()
```




    131750.0




```python
ann_arbor2002["ZHVI_2bedroom"].median()
```




    173650.0




```python
ann_arbor2002["ZHVI_3bedroom"].median()
```




    219950.0




```python
ann_arbor2002["ZHVI_4bedroom"].median()
```




    299700.0




```python
ann_arbor2002["ZHVI_5BedroomOrMore"].median()
```




    376850.0



**QUESTION 5: (Extra) Determine which cities are likely to experience an increase in housing prices
in the coming years.**

(Extra) Use machine learning regression to determine which city is likely to have the
largest price increase over the coming 1, 5 and 10 years. (Where does it make sense
to invest?) Plot the results in a scatterplot with seaborn?


```python
q5 = city_state_data
```


```python
len(q5)
```




    3762566




```python
q5 = q5.loc[q5["State"]=='MI']
q5 = q5[["Date","Year","Month","RegionName","ZHVI_1bedroom","ZHVI_2bedroom","ZHVI_3bedroom","ZHVI_4bedroom","ZHVI_5BedroomOrMore","ZHVIPerSqft_AllHomes","ZHVI_BottomTier","ZHVI_MiddleTier","ZHVI_SingleFamilyResidence","ZHVI_TopTier","State","County","City"]]
q5 = q5.dropna()
```


```python
q5.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Year</th>
      <th>Month</th>
      <th>RegionName</th>
      <th>ZHVI_1bedroom</th>
      <th>ZHVI_2bedroom</th>
      <th>ZHVI_3bedroom</th>
      <th>ZHVI_4bedroom</th>
      <th>ZHVI_5BedroomOrMore</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>State</th>
      <th>County</th>
      <th>City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>209</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>ann_arborwashtenawmi</td>
      <td>90300.0</td>
      <td>107300.0</td>
      <td>129000.0</td>
      <td>188500.0</td>
      <td>220200.0</td>
      <td>95.0</td>
      <td>106900.0</td>
      <td>152000.0</td>
      <td>157300.0</td>
      <td>248200.0</td>
      <td>MI</td>
      <td>Washtenaw</td>
      <td>Ann Arbor</td>
    </tr>
    <tr>
      <th>844</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>bloomfield_hillsoaklandmi</td>
      <td>61500.0</td>
      <td>117800.0</td>
      <td>215800.0</td>
      <td>315100.0</td>
      <td>528700.0</td>
      <td>108.0</td>
      <td>170000.0</td>
      <td>270000.0</td>
      <td>299500.0</td>
      <td>541900.0</td>
      <td>MI</td>
      <td>Oakland</td>
      <td>Bloomfield Hills</td>
    </tr>
    <tr>
      <th>3183</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>ferndaleoaklandmi</td>
      <td>60700.0</td>
      <td>63000.0</td>
      <td>75800.0</td>
      <td>95700.0</td>
      <td>95100.0</td>
      <td>71.0</td>
      <td>58600.0</td>
      <td>71000.0</td>
      <td>71000.0</td>
      <td>101200.0</td>
      <td>MI</td>
      <td>Oakland</td>
      <td>Ferndale</td>
    </tr>
    <tr>
      <th>3787</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>grand_rapidskentmi</td>
      <td>71700.0</td>
      <td>63100.0</td>
      <td>71500.0</td>
      <td>78300.0</td>
      <td>86200.0</td>
      <td>50.0</td>
      <td>45900.0</td>
      <td>65800.0</td>
      <td>64300.0</td>
      <td>105600.0</td>
      <td>MI</td>
      <td>Kent</td>
      <td>Grand Rapids</td>
    </tr>
    <tr>
      <th>4188</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>hazel_parkoaklandmi</td>
      <td>42000.0</td>
      <td>43800.0</td>
      <td>54600.0</td>
      <td>64100.0</td>
      <td>71100.0</td>
      <td>53.0</td>
      <td>42300.0</td>
      <td>51500.0</td>
      <td>51500.0</td>
      <td>64500.0</td>
      <td>MI</td>
      <td>Oakland</td>
      <td>Hazel Park</td>
    </tr>
  </tbody>
</table>
</div>




```python
len(q5)
```




    4470




```python
q5_2017 = q5.loc[q5["Year"]==2017]
q5_2017 = q5_2017.loc[q5_2017["Month"]==5]
#q5_2017.head()
q5_2015 = q5.loc[q5["Year"]==2015]
q5_2015 = q5_2015.loc[q5_2015["Month"]==5]
```


```python
#q5_2017.head()
```


```python
q5_a = pd.merge(q5_2017,q5_2015, on='RegionName')
```


```python
q5_a = q5_a[["RegionName","Year_x","ZHVIPerSqft_AllHomes_x","Year_y","ZHVIPerSqft_AllHomes_y"]]
```


```python
q5_a['Dif'] = q5_a["ZHVIPerSqft_AllHomes_x"] - q5_a["ZHVIPerSqft_AllHomes_y"]
```


```python
q5_a
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ann_arborwashtenawmi</td>
      <td>2017</td>
      <td>208.0</td>
      <td>2015</td>
      <td>184.0</td>
      <td>24.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bloomfield_hillsoaklandmi</td>
      <td>2017</td>
      <td>170.0</td>
      <td>2015</td>
      <td>161.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>brightonlivingstonmi</td>
      <td>2017</td>
      <td>143.0</td>
      <td>2015</td>
      <td>129.0</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>detroitwaynemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>34.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>farmington_hillsoaklandmi</td>
      <td>2017</td>
      <td>124.0</td>
      <td>2015</td>
      <td>113.0</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ferndaleoaklandmi</td>
      <td>2017</td>
      <td>136.0</td>
      <td>2015</td>
      <td>108.0</td>
      <td>28.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>flintgeneseemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>32.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>grand_rapidskentmi</td>
      <td>2017</td>
      <td>101.0</td>
      <td>2015</td>
      <td>79.0</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>hazel_parkoaklandmi</td>
      <td>2017</td>
      <td>67.0</td>
      <td>2015</td>
      <td>55.0</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>hollandottawami</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>107.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>livoniawaynemi</td>
      <td>2017</td>
      <td>134.0</td>
      <td>2015</td>
      <td>117.0</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>milford_townshipoaklandmi</td>
      <td>2017</td>
      <td>148.0</td>
      <td>2015</td>
      <td>134.0</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>muskegon_townshipmuskegonmi</td>
      <td>2017</td>
      <td>60.0</td>
      <td>2015</td>
      <td>51.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>norton_shoresmuskegonmi</td>
      <td>2017</td>
      <td>97.0</td>
      <td>2015</td>
      <td>82.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>rochester_hillsoaklandmi</td>
      <td>2017</td>
      <td>137.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>saginawsaginawmi</td>
      <td>2017</td>
      <td>47.0</td>
      <td>2015</td>
      <td>43.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>saint_clair_shoresmacombmi</td>
      <td>2017</td>
      <td>116.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>south_lyonoaklandmi</td>
      <td>2017</td>
      <td>145.0</td>
      <td>2015</td>
      <td>131.0</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>troyoaklandmi</td>
      <td>2017</td>
      <td>147.0</td>
      <td>2015</td>
      <td>133.0</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>waterfordoaklandmi</td>
      <td>2017</td>
      <td>113.0</td>
      <td>2015</td>
      <td>98.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>west_bloomfieldoaklandmi</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>10.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
len(q5_a)
```




    21




```python
q5_a['Label'] = np.where(q5_a['Dif']>=10 ,'yes','no')
q5_a
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ann_arborwashtenawmi</td>
      <td>2017</td>
      <td>208.0</td>
      <td>2015</td>
      <td>184.0</td>
      <td>24.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bloomfield_hillsoaklandmi</td>
      <td>2017</td>
      <td>170.0</td>
      <td>2015</td>
      <td>161.0</td>
      <td>9.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>brightonlivingstonmi</td>
      <td>2017</td>
      <td>143.0</td>
      <td>2015</td>
      <td>129.0</td>
      <td>14.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>3</th>
      <td>detroitwaynemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>34.0</td>
      <td>6.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>farmington_hillsoaklandmi</td>
      <td>2017</td>
      <td>124.0</td>
      <td>2015</td>
      <td>113.0</td>
      <td>11.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ferndaleoaklandmi</td>
      <td>2017</td>
      <td>136.0</td>
      <td>2015</td>
      <td>108.0</td>
      <td>28.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>6</th>
      <td>flintgeneseemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>32.0</td>
      <td>8.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>7</th>
      <td>grand_rapidskentmi</td>
      <td>2017</td>
      <td>101.0</td>
      <td>2015</td>
      <td>79.0</td>
      <td>22.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>8</th>
      <td>hazel_parkoaklandmi</td>
      <td>2017</td>
      <td>67.0</td>
      <td>2015</td>
      <td>55.0</td>
      <td>12.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>9</th>
      <td>hollandottawami</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>107.0</td>
      <td>19.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>10</th>
      <td>livoniawaynemi</td>
      <td>2017</td>
      <td>134.0</td>
      <td>2015</td>
      <td>117.0</td>
      <td>17.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>11</th>
      <td>milford_townshipoaklandmi</td>
      <td>2017</td>
      <td>148.0</td>
      <td>2015</td>
      <td>134.0</td>
      <td>14.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>12</th>
      <td>muskegon_townshipmuskegonmi</td>
      <td>2017</td>
      <td>60.0</td>
      <td>2015</td>
      <td>51.0</td>
      <td>9.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>13</th>
      <td>norton_shoresmuskegonmi</td>
      <td>2017</td>
      <td>97.0</td>
      <td>2015</td>
      <td>82.0</td>
      <td>15.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>14</th>
      <td>rochester_hillsoaklandmi</td>
      <td>2017</td>
      <td>137.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>11.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>15</th>
      <td>saginawsaginawmi</td>
      <td>2017</td>
      <td>47.0</td>
      <td>2015</td>
      <td>43.0</td>
      <td>4.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>16</th>
      <td>saint_clair_shoresmacombmi</td>
      <td>2017</td>
      <td>116.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>19.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>17</th>
      <td>south_lyonoaklandmi</td>
      <td>2017</td>
      <td>145.0</td>
      <td>2015</td>
      <td>131.0</td>
      <td>14.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>18</th>
      <td>troyoaklandmi</td>
      <td>2017</td>
      <td>147.0</td>
      <td>2015</td>
      <td>133.0</td>
      <td>14.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>19</th>
      <td>waterfordoaklandmi</td>
      <td>2017</td>
      <td>113.0</td>
      <td>2015</td>
      <td>98.0</td>
      <td>15.0</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>20</th>
      <td>west_bloomfieldoaklandmi</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>10.0</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>




```python
import numpy as np
import pandas as pd
import scipy as sp
import sklearn as sk
from sklearn.model_selection import train_test_split
from sklearn.model_selection import cross_val_score
import sklearn.ensemble as skens
import sklearn.metrics as skmetric
import sklearn.naive_bayes as sknb
import sklearn.tree as sktree
import matplotlib.pyplot as plt
%matplotlib inline
import seaborn as sns
sns.set(style='white', color_codes=True, font_scale=1.3)
import sklearn.externals.six as sksix
import IPython.display as ipd
from sklearn.model_selection import cross_val_score
from sklearn import metrics
import os
from sklearn.metrics import accuracy_score
```


```python
df_q5_train,df_q5_test = train_test_split(q5_a, test_size=0.3)
```


```python
gnb_model = sknb.GaussianNB()
# given sepal length, predict if setosa
gnb_model.fit(df_q5_train[['ZHVIPerSqft_AllHomes_y']],df_q5_train['Label'])
```




    GaussianNB(priors=None, var_smoothing=1e-09)




```python
y_pred = gnb_model.predict(df_q5_test[['ZHVIPerSqft_AllHomes_y']])
df_q5_test['predicted_nb'] = y_pred
```

    /anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:2: SettingWithCopyWarning:
    A value is trying to be set on a copy of a slice from a DataFrame.
    Try using .loc[row_indexer,col_indexer] = value instead

    See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy




```python
df_q5_test
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>hollandottawami</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>107.0</td>
      <td>19.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>19</th>
      <td>waterfordoaklandmi</td>
      <td>2017</td>
      <td>113.0</td>
      <td>2015</td>
      <td>98.0</td>
      <td>15.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>20</th>
      <td>west_bloomfieldoaklandmi</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>10.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>3</th>
      <td>detroitwaynemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>34.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>16</th>
      <td>saint_clair_shoresmacombmi</td>
      <td>2017</td>
      <td>116.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>19.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>12</th>
      <td>muskegon_townshipmuskegonmi</td>
      <td>2017</td>
      <td>60.0</td>
      <td>2015</td>
      <td>51.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>13</th>
      <td>norton_shoresmuskegonmi</td>
      <td>2017</td>
      <td>97.0</td>
      <td>2015</td>
      <td>82.0</td>
      <td>15.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>




```python
accuracy_score(df_q5_test["Label"], df_q5_test["predicted_nb"])
```




    1.0




```python
y_pred = gnb_model.predict(df_q5_test[['ZHVIPerSqft_AllHomes_x']])
df_q5_test['predicted_nb2'] = y_pred
```

    /anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:2: SettingWithCopyWarning:
    A value is trying to be set on a copy of a slice from a DataFrame.
    Try using .loc[row_indexer,col_indexer] = value instead

    See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy




```python
accuracy_score(df_q5_test["Label"], df_q5_test["predicted_nb2"])
```




    0.8571428571428571




```python
df_q5_test
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
      <th>predicted_nb2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>hollandottawami</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>107.0</td>
      <td>19.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>19</th>
      <td>waterfordoaklandmi</td>
      <td>2017</td>
      <td>113.0</td>
      <td>2015</td>
      <td>98.0</td>
      <td>15.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>20</th>
      <td>west_bloomfieldoaklandmi</td>
      <td>2017</td>
      <td>126.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>10.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>3</th>
      <td>detroitwaynemi</td>
      <td>2017</td>
      <td>40.0</td>
      <td>2015</td>
      <td>34.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>16</th>
      <td>saint_clair_shoresmacombmi</td>
      <td>2017</td>
      <td>116.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>19.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>12</th>
      <td>muskegon_townshipmuskegonmi</td>
      <td>2017</td>
      <td>60.0</td>
      <td>2015</td>
      <td>51.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>13</th>
      <td>norton_shoresmuskegonmi</td>
      <td>2017</td>
      <td>97.0</td>
      <td>2015</td>
      <td>82.0</td>
      <td>15.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>



Whole Country


```python
q5_b = city_state_data
```


```python
len(q5_b)
```




    3762566




```python
q5_b2 = q5_b[["Date","Year","Month","RegionName","ZHVI_1bedroom","ZHVI_2bedroom","ZHVI_3bedroom","ZHVI_4bedroom","ZHVI_5BedroomOrMore","ZHVIPerSqft_AllHomes","ZHVI_BottomTier","ZHVI_MiddleTier","ZHVI_SingleFamilyResidence","ZHVI_TopTier","State","County","City"]]
q5_b2 = q5_b2.dropna()
```


```python
q5_b2.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Year</th>
      <th>Month</th>
      <th>RegionName</th>
      <th>ZHVI_1bedroom</th>
      <th>ZHVI_2bedroom</th>
      <th>ZHVI_3bedroom</th>
      <th>ZHVI_4bedroom</th>
      <th>ZHVI_5BedroomOrMore</th>
      <th>ZHVIPerSqft_AllHomes</th>
      <th>ZHVI_BottomTier</th>
      <th>ZHVI_MiddleTier</th>
      <th>ZHVI_SingleFamilyResidence</th>
      <th>ZHVI_TopTier</th>
      <th>State</th>
      <th>County</th>
      <th>City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>abingtonmontgomerypa</td>
      <td>47500.0</td>
      <td>102200.0</td>
      <td>122000.0</td>
      <td>157600.0</td>
      <td>219000.0</td>
      <td>78.0</td>
      <td>102000.0</td>
      <td>128700.0</td>
      <td>130900.0</td>
      <td>189400.0</td>
      <td>PA</td>
      <td>Montgomery</td>
      <td>Abington</td>
    </tr>
    <tr>
      <th>18</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>actonmiddlesexma</td>
      <td>52400.0</td>
      <td>122200.0</td>
      <td>212500.0</td>
      <td>288100.0</td>
      <td>325500.0</td>
      <td>118.0</td>
      <td>128200.0</td>
      <td>230500.0</td>
      <td>253900.0</td>
      <td>330100.0</td>
      <td>MA</td>
      <td>Middlesex</td>
      <td>Acton</td>
    </tr>
    <tr>
      <th>21</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>acworthcobbga</td>
      <td>62200.0</td>
      <td>75500.0</td>
      <td>100800.0</td>
      <td>155900.0</td>
      <td>201300.0</td>
      <td>60.0</td>
      <td>83900.0</td>
      <td>112900.0</td>
      <td>114800.0</td>
      <td>174000.0</td>
      <td>GA</td>
      <td>Cobb</td>
      <td>Acworth</td>
    </tr>
    <tr>
      <th>44</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>agawamhampdenma</td>
      <td>35800.0</td>
      <td>82100.0</td>
      <td>107400.0</td>
      <td>114100.0</td>
      <td>127300.0</td>
      <td>71.0</td>
      <td>68600.0</td>
      <td>101500.0</td>
      <td>106800.0</td>
      <td>124700.0</td>
      <td>MA</td>
      <td>Hampden</td>
      <td>Agawam</td>
    </tr>
    <tr>
      <th>55</th>
      <td>1996-04-30</td>
      <td>1996</td>
      <td>4</td>
      <td>akronsummitoh</td>
      <td>41600.0</td>
      <td>49100.0</td>
      <td>59500.0</td>
      <td>70000.0</td>
      <td>74900.0</td>
      <td>49.0</td>
      <td>42800.0</td>
      <td>57100.0</td>
      <td>56300.0</td>
      <td>88000.0</td>
      <td>OH</td>
      <td>Summit</td>
      <td>Akron</td>
    </tr>
  </tbody>
</table>
</div>




```python
q5_b2_2017 = q5_b2.loc[q5_b2["Year"]==2017]
q5_b2_2017 = q5_b2_2017.loc[q5_b2_2017["Month"]==5]
#q5_2017.head()
q5_b2_2015 = q5_b2.loc[q5_b2["Year"]==2015]
q5_b2_2015 = q5_b2_2015.loc[q5_b2_2015["Month"]==5]
```


```python
q5_b2_a = pd.merge(q5_b2_2017,q5_b2_2015, on='RegionName')
```


```python
q5_b2_a = q5_b2_a[["RegionName","Year_x","ZHVIPerSqft_AllHomes_x","Year_y","ZHVIPerSqft_AllHomes_y"]]
```


```python
q5_b2_a['Dif'] = q5_b2_a["ZHVIPerSqft_AllHomes_x"] - q5_b2_a["ZHVIPerSqft_AllHomes_y"]
```


```python
conditions = [
    (q5_b2_a['Dif'] >= 100 ) & (q5_b2_a['Dif'] <= 500),
    (q5_b2_a['Dif'] < 100 ) ,
    (q5_b2_a['Dif'] > 500 )]
choices = ['yes', 'no', 'no']
q5_b2_a['Label'] = np.select(conditions, choices, default='null')
```


```python
q5_b2_a.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>abingdonwashingtonva</td>
      <td>2017</td>
      <td>94.0</td>
      <td>2015</td>
      <td>89.0</td>
      <td>5.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1</th>
      <td>abingtonmontgomerypa</td>
      <td>2017</td>
      <td>159.0</td>
      <td>2015</td>
      <td>150.0</td>
      <td>9.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>actonmiddlesexma</td>
      <td>2017</td>
      <td>267.0</td>
      <td>2015</td>
      <td>241.0</td>
      <td>26.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>acworthcobbga</td>
      <td>2017</td>
      <td>107.0</td>
      <td>2015</td>
      <td>93.0</td>
      <td>14.0</td>
      <td>no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>agawamhampdenma</td>
      <td>2017</td>
      <td>144.0</td>
      <td>2015</td>
      <td>136.0</td>
      <td>8.0</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div>




```python
df_q5B_train,df_q5B_test = train_test_split(q5_b2_a, test_size=0.3)
```


```python
gnb_model = sknb.GaussianNB()
# given sepal length, predict if setosa
gnb_model.fit(df_q5B_train[['ZHVIPerSqft_AllHomes_y']],df_q5B_train['Label'])
```




    GaussianNB(priors=None, var_smoothing=1e-09)




```python
y_pred = gnb_model.predict(df_q5B_test[['ZHVIPerSqft_AllHomes_y']])
df_q5B_test['predicted_nb'] = y_pred
```

    /anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:2: SettingWithCopyWarning:
    A value is trying to be set on a copy of a slice from a DataFrame.
    Try using .loc[row_indexer,col_indexer] = value instead

    See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy




```python
df_q5B_test
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>778</th>
      <td>sacoyorkme</td>
      <td>2017</td>
      <td>157.0</td>
      <td>2015</td>
      <td>144.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>114</th>
      <td>bristolhartfordct</td>
      <td>2017</td>
      <td>128.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>2.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>874</th>
      <td>stamfordfairfieldct</td>
      <td>2017</td>
      <td>249.0</td>
      <td>2015</td>
      <td>251.0</td>
      <td>-2.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>75</th>
      <td>bethlehemnorthamptonpa</td>
      <td>2017</td>
      <td>106.0</td>
      <td>2015</td>
      <td>100.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>568</th>
      <td>monroefairfieldct</td>
      <td>2017</td>
      <td>173.0</td>
      <td>2015</td>
      <td>175.0</td>
      <td>-2.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>141</th>
      <td>cantonhaywoodnc</td>
      <td>2017</td>
      <td>112.0</td>
      <td>2015</td>
      <td>96.0</td>
      <td>16.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>actonmiddlesexma</td>
      <td>2017</td>
      <td>267.0</td>
      <td>2015</td>
      <td>241.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>362</th>
      <td>haikumauihi</td>
      <td>2017</td>
      <td>485.0</td>
      <td>2015</td>
      <td>443.0</td>
      <td>42.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>218</th>
      <td>daly_citysan_mateoca</td>
      <td>2017</td>
      <td>693.0</td>
      <td>2015</td>
      <td>587.0</td>
      <td>106.0</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>546</th>
      <td>middletown_townshipbuckspa</td>
      <td>2017</td>
      <td>169.0</td>
      <td>2015</td>
      <td>162.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>207</th>
      <td>cranstonprovidenceri</td>
      <td>2017</td>
      <td>166.0</td>
      <td>2015</td>
      <td>144.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>685</th>
      <td>palmettomanateefl</td>
      <td>2017</td>
      <td>128.0</td>
      <td>2015</td>
      <td>106.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>144</th>
      <td>carmelputnamny</td>
      <td>2017</td>
      <td>213.0</td>
      <td>2015</td>
      <td>201.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>186</th>
      <td>colorado_springsel_pasoco</td>
      <td>2017</td>
      <td>136.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>20.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>326</th>
      <td>garden_groveorangeca</td>
      <td>2017</td>
      <td>418.0</td>
      <td>2015</td>
      <td>360.0</td>
      <td>58.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>152</th>
      <td>celebrationosceolafl</td>
      <td>2017</td>
      <td>204.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>355</th>
      <td>greergreenvillesc</td>
      <td>2017</td>
      <td>99.0</td>
      <td>2015</td>
      <td>88.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>478</th>
      <td>little_fallsmorrisonmn</td>
      <td>2017</td>
      <td>68.0</td>
      <td>2015</td>
      <td>60.0</td>
      <td>8.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>403</th>
      <td>inmanspartanburgsc</td>
      <td>2017</td>
      <td>92.0</td>
      <td>2015</td>
      <td>81.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>876</th>
      <td>statesvilleiredellnc</td>
      <td>2017</td>
      <td>85.0</td>
      <td>2015</td>
      <td>74.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>507</th>
      <td>madisonnew_havenct</td>
      <td>2017</td>
      <td>194.0</td>
      <td>2015</td>
      <td>189.0</td>
      <td>5.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>699</th>
      <td>pembroke_pinesbrowardfl</td>
      <td>2017</td>
      <td>168.0</td>
      <td>2015</td>
      <td>143.0</td>
      <td>25.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>562</th>
      <td>minneapolishennepinmn</td>
      <td>2017</td>
      <td>210.0</td>
      <td>2015</td>
      <td>181.0</td>
      <td>29.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>551</th>
      <td>milford_townshipoaklandmi</td>
      <td>2017</td>
      <td>148.0</td>
      <td>2015</td>
      <td>134.0</td>
      <td>14.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>17</th>
      <td>altamonte_springsseminolefl</td>
      <td>2017</td>
      <td>117.0</td>
      <td>2015</td>
      <td>91.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>189</th>
      <td>columbiaboonemo</td>
      <td>2017</td>
      <td>93.0</td>
      <td>2015</td>
      <td>87.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>194</th>
      <td>concordcabarrusnc</td>
      <td>2017</td>
      <td>104.0</td>
      <td>2015</td>
      <td>92.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>149</th>
      <td>castro_valleyalamedaca</td>
      <td>2017</td>
      <td>467.0</td>
      <td>2015</td>
      <td>401.0</td>
      <td>66.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>124</th>
      <td>buhltwin_fallsid</td>
      <td>2017</td>
      <td>84.0</td>
      <td>2015</td>
      <td>77.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>96</th>
      <td>bonita_springsleefl</td>
      <td>2017</td>
      <td>198.0</td>
      <td>2015</td>
      <td>181.0</td>
      <td>17.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>53</th>
      <td>avonhartfordct</td>
      <td>2017</td>
      <td>157.0</td>
      <td>2015</td>
      <td>157.0</td>
      <td>0.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>487</th>
      <td>long_beachlos_angelesca</td>
      <td>2017</td>
      <td>419.0</td>
      <td>2015</td>
      <td>365.0</td>
      <td>54.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>411</th>
      <td>jasperduboisin</td>
      <td>2017</td>
      <td>92.0</td>
      <td>2015</td>
      <td>86.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>821</th>
      <td>schaumburgcookil</td>
      <td>2017</td>
      <td>171.0</td>
      <td>2015</td>
      <td>159.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>345</th>
      <td>grants_passjosephineor</td>
      <td>2017</td>
      <td>162.0</td>
      <td>2015</td>
      <td>133.0</td>
      <td>29.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>632</th>
      <td>northampton_townshipbuckspa</td>
      <td>2017</td>
      <td>174.0</td>
      <td>2015</td>
      <td>171.0</td>
      <td>3.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>738</th>
      <td>prospectjeffersonky</td>
      <td>2017</td>
      <td>147.0</td>
      <td>2015</td>
      <td>136.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>319</th>
      <td>fremontdodgene</td>
      <td>2017</td>
      <td>108.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>210</th>
      <td>crestviewokaloosafl</td>
      <td>2017</td>
      <td>91.0</td>
      <td>2015</td>
      <td>84.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>809</th>
      <td>sangerfresnoca</td>
      <td>2017</td>
      <td>138.0</td>
      <td>2015</td>
      <td>117.0</td>
      <td>21.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>350</th>
      <td>greensboroguilfordnc</td>
      <td>2017</td>
      <td>87.0</td>
      <td>2015</td>
      <td>80.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1019</th>
      <td>westboroughworcesterma</td>
      <td>2017</td>
      <td>223.0</td>
      <td>2015</td>
      <td>201.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>302</th>
      <td>findlayhancockoh</td>
      <td>2017</td>
      <td>85.0</td>
      <td>2015</td>
      <td>80.0</td>
      <td>5.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>510</th>
      <td>malvernchesterpa</td>
      <td>2017</td>
      <td>192.0</td>
      <td>2015</td>
      <td>183.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1050</th>
      <td>woodburnmarionor</td>
      <td>2017</td>
      <td>168.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>42.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>978</th>
      <td>vestavia_hillsjeffersonal</td>
      <td>2017</td>
      <td>151.0</td>
      <td>2015</td>
      <td>138.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>406</th>
      <td>island_parkfremontid</td>
      <td>2017</td>
      <td>210.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>18.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>588</th>
      <td>napervilledu_pageil</td>
      <td>2017</td>
      <td>162.0</td>
      <td>2015</td>
      <td>158.0</td>
      <td>4.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>825</th>
      <td>seasidemontereyca</td>
      <td>2017</td>
      <td>393.0</td>
      <td>2015</td>
      <td>325.0</td>
      <td>68.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>78</th>
      <td>biddefordyorkme</td>
      <td>2017</td>
      <td>163.0</td>
      <td>2015</td>
      <td>149.0</td>
      <td>14.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>70</th>
      <td>bellinghamwhatcomwa</td>
      <td>2017</td>
      <td>215.0</td>
      <td>2015</td>
      <td>179.0</td>
      <td>36.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>300</th>
      <td>fernandina_beachnassaufl</td>
      <td>2017</td>
      <td>172.0</td>
      <td>2015</td>
      <td>151.0</td>
      <td>21.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>785</th>
      <td>saint_georgewashingtonut</td>
      <td>2017</td>
      <td>127.0</td>
      <td>2015</td>
      <td>114.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>964</th>
      <td>twin_fallstwin_fallsid</td>
      <td>2017</td>
      <td>94.0</td>
      <td>2015</td>
      <td>85.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>58</th>
      <td>baltimorebaltimore_citymd</td>
      <td>2017</td>
      <td>107.0</td>
      <td>2015</td>
      <td>99.0</td>
      <td>8.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>306</th>
      <td>fontanasan_bernardinoca</td>
      <td>2017</td>
      <td>219.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>27.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>252</th>
      <td>east_greenwichkentri</td>
      <td>2017</td>
      <td>192.0</td>
      <td>2015</td>
      <td>166.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>192</th>
      <td>columbusfranklinoh</td>
      <td>2017</td>
      <td>93.0</td>
      <td>2015</td>
      <td>78.0</td>
      <td>15.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>201</th>
      <td>coos_baycoosor</td>
      <td>2017</td>
      <td>134.0</td>
      <td>2015</td>
      <td>118.0</td>
      <td>16.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1057</th>
      <td>worcesterworcesterma</td>
      <td>2017</td>
      <td>150.0</td>
      <td>2015</td>
      <td>135.0</td>
      <td>15.0</td>
      <td>no</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
<p>321 rows × 8 columns</p>
</div>




```python
accuracy_score(df_q5B_test["Label"], df_q5B_test["predicted_nb"])
```




    0.9844236760124611




```python
# utility class to compare the predictions versus ground truth
def comparePlot(input_frame,real_column,predicted_column):
    df_a = input_frame.copy()
    df_b = input_frame.copy()
    df_a['label_source'] = 'ZHVIPerSqft_AllHomes_y'
    df_b['label_source'] = 'ZHVIPerSqft_AllHomes_x'
    df_a['label'] = df_a[real_column]
    df_b['label'] = df_b[predicted_column].apply(lambda x: 'Predict %s'%x)
    df_c = pd.concat((df_a, df_b), axis=0, ignore_index=True)
    sns.lmplot(x='ZHVIPerSqft_AllHomes_y', y='ZHVIPerSqft_AllHomes_x', col='label_source',
               hue='label', data=df_c, fit_reg=False, size=4);
```


```python
comparePlot(df_q5B_test,"ZHVIPerSqft_AllHomes_y","predicted_nb")
```

    /anaconda3/lib/python3.6/site-packages/seaborn/regression.py:546: UserWarning: The `size` paramter has been renamed to `height`; please update your code.
      warnings.warn(msg, UserWarning)



![png](output_150_1.png)
<img src="/assets/images/zillow/output_150_1.png" width="100%">




```python
y_pred = gnb_model.predict(df_q5B_test[['ZHVIPerSqft_AllHomes_x']])
df_q5B_test['predicted_nb2'] = y_pred
```

    /anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:2: SettingWithCopyWarning:
    A value is trying to be set on a copy of a slice from a DataFrame.
    Try using .loc[row_indexer,col_indexer] = value instead

    See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy




```python
df_q5B_test
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
      <th>predicted_nb2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>778</th>
      <td>sacoyorkme</td>
      <td>2017</td>
      <td>157.0</td>
      <td>2015</td>
      <td>144.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>114</th>
      <td>bristolhartfordct</td>
      <td>2017</td>
      <td>128.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>2.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>874</th>
      <td>stamfordfairfieldct</td>
      <td>2017</td>
      <td>249.0</td>
      <td>2015</td>
      <td>251.0</td>
      <td>-2.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>75</th>
      <td>bethlehemnorthamptonpa</td>
      <td>2017</td>
      <td>106.0</td>
      <td>2015</td>
      <td>100.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>568</th>
      <td>monroefairfieldct</td>
      <td>2017</td>
      <td>173.0</td>
      <td>2015</td>
      <td>175.0</td>
      <td>-2.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>141</th>
      <td>cantonhaywoodnc</td>
      <td>2017</td>
      <td>112.0</td>
      <td>2015</td>
      <td>96.0</td>
      <td>16.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>actonmiddlesexma</td>
      <td>2017</td>
      <td>267.0</td>
      <td>2015</td>
      <td>241.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>362</th>
      <td>haikumauihi</td>
      <td>2017</td>
      <td>485.0</td>
      <td>2015</td>
      <td>443.0</td>
      <td>42.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>218</th>
      <td>daly_citysan_mateoca</td>
      <td>2017</td>
      <td>693.0</td>
      <td>2015</td>
      <td>587.0</td>
      <td>106.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>546</th>
      <td>middletown_townshipbuckspa</td>
      <td>2017</td>
      <td>169.0</td>
      <td>2015</td>
      <td>162.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>207</th>
      <td>cranstonprovidenceri</td>
      <td>2017</td>
      <td>166.0</td>
      <td>2015</td>
      <td>144.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>685</th>
      <td>palmettomanateefl</td>
      <td>2017</td>
      <td>128.0</td>
      <td>2015</td>
      <td>106.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>144</th>
      <td>carmelputnamny</td>
      <td>2017</td>
      <td>213.0</td>
      <td>2015</td>
      <td>201.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>186</th>
      <td>colorado_springsel_pasoco</td>
      <td>2017</td>
      <td>136.0</td>
      <td>2015</td>
      <td>116.0</td>
      <td>20.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>326</th>
      <td>garden_groveorangeca</td>
      <td>2017</td>
      <td>418.0</td>
      <td>2015</td>
      <td>360.0</td>
      <td>58.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>152</th>
      <td>celebrationosceolafl</td>
      <td>2017</td>
      <td>204.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>355</th>
      <td>greergreenvillesc</td>
      <td>2017</td>
      <td>99.0</td>
      <td>2015</td>
      <td>88.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>478</th>
      <td>little_fallsmorrisonmn</td>
      <td>2017</td>
      <td>68.0</td>
      <td>2015</td>
      <td>60.0</td>
      <td>8.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>403</th>
      <td>inmanspartanburgsc</td>
      <td>2017</td>
      <td>92.0</td>
      <td>2015</td>
      <td>81.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>876</th>
      <td>statesvilleiredellnc</td>
      <td>2017</td>
      <td>85.0</td>
      <td>2015</td>
      <td>74.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>507</th>
      <td>madisonnew_havenct</td>
      <td>2017</td>
      <td>194.0</td>
      <td>2015</td>
      <td>189.0</td>
      <td>5.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>699</th>
      <td>pembroke_pinesbrowardfl</td>
      <td>2017</td>
      <td>168.0</td>
      <td>2015</td>
      <td>143.0</td>
      <td>25.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>562</th>
      <td>minneapolishennepinmn</td>
      <td>2017</td>
      <td>210.0</td>
      <td>2015</td>
      <td>181.0</td>
      <td>29.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>551</th>
      <td>milford_townshipoaklandmi</td>
      <td>2017</td>
      <td>148.0</td>
      <td>2015</td>
      <td>134.0</td>
      <td>14.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>17</th>
      <td>altamonte_springsseminolefl</td>
      <td>2017</td>
      <td>117.0</td>
      <td>2015</td>
      <td>91.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>189</th>
      <td>columbiaboonemo</td>
      <td>2017</td>
      <td>93.0</td>
      <td>2015</td>
      <td>87.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>194</th>
      <td>concordcabarrusnc</td>
      <td>2017</td>
      <td>104.0</td>
      <td>2015</td>
      <td>92.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>149</th>
      <td>castro_valleyalamedaca</td>
      <td>2017</td>
      <td>467.0</td>
      <td>2015</td>
      <td>401.0</td>
      <td>66.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>124</th>
      <td>buhltwin_fallsid</td>
      <td>2017</td>
      <td>84.0</td>
      <td>2015</td>
      <td>77.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>96</th>
      <td>bonita_springsleefl</td>
      <td>2017</td>
      <td>198.0</td>
      <td>2015</td>
      <td>181.0</td>
      <td>17.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>53</th>
      <td>avonhartfordct</td>
      <td>2017</td>
      <td>157.0</td>
      <td>2015</td>
      <td>157.0</td>
      <td>0.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>487</th>
      <td>long_beachlos_angelesca</td>
      <td>2017</td>
      <td>419.0</td>
      <td>2015</td>
      <td>365.0</td>
      <td>54.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>411</th>
      <td>jasperduboisin</td>
      <td>2017</td>
      <td>92.0</td>
      <td>2015</td>
      <td>86.0</td>
      <td>6.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>821</th>
      <td>schaumburgcookil</td>
      <td>2017</td>
      <td>171.0</td>
      <td>2015</td>
      <td>159.0</td>
      <td>12.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>345</th>
      <td>grants_passjosephineor</td>
      <td>2017</td>
      <td>162.0</td>
      <td>2015</td>
      <td>133.0</td>
      <td>29.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>632</th>
      <td>northampton_townshipbuckspa</td>
      <td>2017</td>
      <td>174.0</td>
      <td>2015</td>
      <td>171.0</td>
      <td>3.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>738</th>
      <td>prospectjeffersonky</td>
      <td>2017</td>
      <td>147.0</td>
      <td>2015</td>
      <td>136.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>319</th>
      <td>fremontdodgene</td>
      <td>2017</td>
      <td>108.0</td>
      <td>2015</td>
      <td>97.0</td>
      <td>11.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>210</th>
      <td>crestviewokaloosafl</td>
      <td>2017</td>
      <td>91.0</td>
      <td>2015</td>
      <td>84.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>809</th>
      <td>sangerfresnoca</td>
      <td>2017</td>
      <td>138.0</td>
      <td>2015</td>
      <td>117.0</td>
      <td>21.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>350</th>
      <td>greensboroguilfordnc</td>
      <td>2017</td>
      <td>87.0</td>
      <td>2015</td>
      <td>80.0</td>
      <td>7.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1019</th>
      <td>westboroughworcesterma</td>
      <td>2017</td>
      <td>223.0</td>
      <td>2015</td>
      <td>201.0</td>
      <td>22.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>302</th>
      <td>findlayhancockoh</td>
      <td>2017</td>
      <td>85.0</td>
      <td>2015</td>
      <td>80.0</td>
      <td>5.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>510</th>
      <td>malvernchesterpa</td>
      <td>2017</td>
      <td>192.0</td>
      <td>2015</td>
      <td>183.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1050</th>
      <td>woodburnmarionor</td>
      <td>2017</td>
      <td>168.0</td>
      <td>2015</td>
      <td>126.0</td>
      <td>42.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>978</th>
      <td>vestavia_hillsjeffersonal</td>
      <td>2017</td>
      <td>151.0</td>
      <td>2015</td>
      <td>138.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>406</th>
      <td>island_parkfremontid</td>
      <td>2017</td>
      <td>210.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>18.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>588</th>
      <td>napervilledu_pageil</td>
      <td>2017</td>
      <td>162.0</td>
      <td>2015</td>
      <td>158.0</td>
      <td>4.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>825</th>
      <td>seasidemontereyca</td>
      <td>2017</td>
      <td>393.0</td>
      <td>2015</td>
      <td>325.0</td>
      <td>68.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>78</th>
      <td>biddefordyorkme</td>
      <td>2017</td>
      <td>163.0</td>
      <td>2015</td>
      <td>149.0</td>
      <td>14.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>70</th>
      <td>bellinghamwhatcomwa</td>
      <td>2017</td>
      <td>215.0</td>
      <td>2015</td>
      <td>179.0</td>
      <td>36.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>300</th>
      <td>fernandina_beachnassaufl</td>
      <td>2017</td>
      <td>172.0</td>
      <td>2015</td>
      <td>151.0</td>
      <td>21.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>785</th>
      <td>saint_georgewashingtonut</td>
      <td>2017</td>
      <td>127.0</td>
      <td>2015</td>
      <td>114.0</td>
      <td>13.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>964</th>
      <td>twin_fallstwin_fallsid</td>
      <td>2017</td>
      <td>94.0</td>
      <td>2015</td>
      <td>85.0</td>
      <td>9.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>58</th>
      <td>baltimorebaltimore_citymd</td>
      <td>2017</td>
      <td>107.0</td>
      <td>2015</td>
      <td>99.0</td>
      <td>8.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>306</th>
      <td>fontanasan_bernardinoca</td>
      <td>2017</td>
      <td>219.0</td>
      <td>2015</td>
      <td>192.0</td>
      <td>27.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>252</th>
      <td>east_greenwichkentri</td>
      <td>2017</td>
      <td>192.0</td>
      <td>2015</td>
      <td>166.0</td>
      <td>26.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>192</th>
      <td>columbusfranklinoh</td>
      <td>2017</td>
      <td>93.0</td>
      <td>2015</td>
      <td>78.0</td>
      <td>15.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>201</th>
      <td>coos_baycoosor</td>
      <td>2017</td>
      <td>134.0</td>
      <td>2015</td>
      <td>118.0</td>
      <td>16.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1057</th>
      <td>worcesterworcesterma</td>
      <td>2017</td>
      <td>150.0</td>
      <td>2015</td>
      <td>135.0</td>
      <td>15.0</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
<p>321 rows × 9 columns</p>
</div>




```python
invest = df_q5B_test.loc[df_q5B_test["predicted_nb2"]=="yes"]
```


```python
invest.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
      <th>predicted_nb2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>218</th>
      <td>daly_citysan_mateoca</td>
      <td>2017</td>
      <td>693.0</td>
      <td>2015</td>
      <td>587.0</td>
      <td>106.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>795</th>
      <td>san_anselmomarinca</td>
      <td>2017</td>
      <td>661.0</td>
      <td>2015</td>
      <td>569.0</td>
      <td>92.0</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>757</th>
      <td>redondo_beachlos_angelesca</td>
      <td>2017</td>
      <td>579.0</td>
      <td>2015</td>
      <td>494.0</td>
      <td>85.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>417</th>
      <td>kailuahonoluluhi</td>
      <td>2017</td>
      <td>604.0</td>
      <td>2015</td>
      <td>537.0</td>
      <td>67.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>509</th>
      <td>malibulos_angelesca</td>
      <td>2017</td>
      <td>1208.0</td>
      <td>2015</td>
      <td>1087.0</td>
      <td>121.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>




```python

```


```python
final_data = invest.sort_values(by='ZHVIPerSqft_AllHomes_x')
```


```python
final_data.to_csv("Output.csv",encoding='utf-8', index=False)
```


```python
invest.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
      <th>predicted_nb2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>218</th>
      <td>daly_citysan_mateoca</td>
      <td>2017</td>
      <td>693.0</td>
      <td>2015</td>
      <td>587.0</td>
      <td>106.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>795</th>
      <td>san_anselmomarinca</td>
      <td>2017</td>
      <td>661.0</td>
      <td>2015</td>
      <td>569.0</td>
      <td>92.0</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>757</th>
      <td>redondo_beachlos_angelesca</td>
      <td>2017</td>
      <td>579.0</td>
      <td>2015</td>
      <td>494.0</td>
      <td>85.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>417</th>
      <td>kailuahonoluluhi</td>
      <td>2017</td>
      <td>604.0</td>
      <td>2015</td>
      <td>537.0</td>
      <td>67.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>509</th>
      <td>malibulos_angelesca</td>
      <td>2017</td>
      <td>1208.0</td>
      <td>2015</td>
      <td>1087.0</td>
      <td>121.0</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>




```python
final_data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegionName</th>
      <th>Year_x</th>
      <th>ZHVIPerSqft_AllHomes_x</th>
      <th>Year_y</th>
      <th>ZHVIPerSqft_AllHomes_y</th>
      <th>Dif</th>
      <th>Label</th>
      <th>predicted_nb</th>
      <th>predicted_nb2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>757</th>
      <td>redondo_beachlos_angelesca</td>
      <td>2017</td>
      <td>579.0</td>
      <td>2015</td>
      <td>494.0</td>
      <td>85.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>417</th>
      <td>kailuahonoluluhi</td>
      <td>2017</td>
      <td>604.0</td>
      <td>2015</td>
      <td>537.0</td>
      <td>67.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>392</th>
      <td>honoluluhonoluluhi</td>
      <td>2017</td>
      <td>606.0</td>
      <td>2015</td>
      <td>556.0</td>
      <td>50.0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>845</th>
      <td>solana_beachsan_diegoca</td>
      <td>2017</td>
      <td>631.0</td>
      <td>2015</td>
      <td>578.0</td>
      <td>53.0</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>795</th>
      <td>san_anselmomarinca</td>
      <td>2017</td>
      <td>661.0</td>
      <td>2015</td>
      <td>569.0</td>
      <td>92.0</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>



**Sample Data**


```python
sample_data = city_state_data.head(1000)
```


```python
sample_data.to_csv("sample_data.csv",encoding='utf-8', index=False)
```


```python

```


```python

```
